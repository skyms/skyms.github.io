/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/js/globalVariableRewriter",["require","exports","vs/base/strings","vs/languages/typescript/lib/typescriptServices"],function(e,t,r,n){var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.computeEdits=function(e){this._context=e,this._context.syntaxTree.sourceUnit().accept(this)},t.prototype.visitToken=function(t){for(var r=t.leadingTrivia().concat(t.trailingTrivia()),n=t.leadingTrivia().count(),s=this._context.syntaxInfo.fullStart(t),o=0,i=r.count();i>o;o++)o===n&&(s+=t.width()),6===r.syntaxTriviaAt(o).kind()&&(this._handleMultilineComment(r.syntaxTriviaAt(o).fullText(),s),s+=r.syntaxTriviaAt(o).fullWidth());e.prototype.visitToken.call(this,t)},t.prototype._handleMultilineComment=function(e,n){var s=t._Pattern.exec(e);if(s){n+=s[1].length;for(var o=s[2].split(","),i=0,a=o.length;a>i;i++){var l=o[i].length-r.ltrim(o[i]," ").length,c=o[i].length-r.rtrim(o[i]," ").length,u=o[i].trim(),h=u.indexOf(":");u=u.substring(0,~h?h:void 0),n+=l,this._context.newInsert(r.format("declare var {0}:any;\n",u)),n+=1+u.length+c}}},t._Pattern=/^(\/\* ?globals? )([\s\S]+)\*\//m,t}(n.SyntaxWalker);t.GlobalVariableCollector=s});