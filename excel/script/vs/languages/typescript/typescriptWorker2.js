/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/base/trie",["require","exports","vs/base/collections","vs/base/assert"],function(e,t,n,r){function o(e,t){void 0===t&&(t=m);var r,o;return r={_key:null,_parent:null,_children:{},parent:function(){return null},children:function(e){return void 0===e&&(e=!1),l(this,e)}},o={insert:function(e,n){return i(r,t(e),n)},lookUp:function(e,n){return void 0===n&&(n=!1),s(r,t(e),n)},roots:function(){return l(r,!1)},values:function(){return c(r)},fringe:function(){return u(r)},remove:function(e){return d(e)},forEach:function(e){return p(r,e)}},"undefined"!=typeof e&&n.forEach(e,function(e){o.insert(e.key,e.value)}),o}function i(e,t,n){for(var r=0,o=t.length,i=e;o>r&&(i=e._children[t[r]]);)e=i,r+=1;for(;o>r;)i={_key:t[r],_parent:e,_children:{},parent:function(){return a(this)},children:function(e){return void 0===e&&(e=!1),l(this,e)}},e._children[t[r]]=i,e=i,r+=1;return i.element=n,i}function s(e,t,n){for(var r=0,o=t.length,i=e,s=void 0!==i.element?i:void 0;o>r&&(i=e._children[t[r]]);)e=i,r+=1,void 0!==i.element&&(s=i);return i&&void 0!==i.element?i:n&&void 0!==s?s:null}function a(e){for(;e._parent;){if("undefined"!=typeof e._parent.element)return e._parent;e=e._parent}return null}function l(e,t){for(var r=[],o=n.values(e._children);o.length>0;)e=o.shift(),void 0!==e.element&&r.push(e),(t||void 0===e.element)&&o.push.apply(o,n.values(e._children));return r}function c(e){for(var t=[],r=[e];r.length>0;)e=r.pop(),void 0!==e.element&&t.push(e.element),n.forEach(e._children,function(e){r.push(e.value)});return t}function u(e){for(var t=[e],o=[];t.length>0;){var i=t.pop(),s=t.length;n.forEach(i._children,function(e){t.push(e.value)}),s===t.length&&null!==i._key&&(r.ok("undefined"!=typeof i.element),o.push(i))}return o}function d(e){return e._parent?e._parent._children[e._key]!==e?!1:(delete e._parent._children[e._key],"undefined"==typeof e._parent.element&&h(e._parent._children)&&d(e._parent),!0):!1}function p(e,t){n.forEach(e._children,function(e){void 0!==e.value.element&&t(e.value),p(e.value,t)})}function h(e){if(!e)return!0;for(var t in e)if(f.call(e,t))return!1;return!0}var m=function(e){return e.split("")};t.newTrie=o;var f=Object.prototype.hasOwnProperty}),define("vs/languages/typescript/typescript.configuration",["require","exports","vs/base/objects","vs/base/severity","vs/base/paths","vs/base/trie","vs/base/strings"],function(e,t,n,r,o,i,s){function a(e,t,n){return e instanceof c?e:new c(e,t,n)}function l(e,t){return e instanceof c&&(e=e.raw),t instanceof c&&(t=t.raw),n.equals(e,t)}t.impilictAnyClassifier=function(e){return e.code>=7005&&e.code<=7018?r.Warning:r.Error},t.defaultLintSettings={emptyBlocksWithoutComment:"ignore",curlyBracketsMustNotBeOmitted:"ignore",comparisonOperatorsNotStrict:"ignore",missingSemicolon:"ignore",unknownTypeOfResults:"ignore",semicolonsInsteadOfBlocks:"ignore",functionsInsideLoops:"ignore",functionsWithoutReturnType:"ignore",tripleSlashReferenceAlike:"ignore",unusedImports:"ignore",unusedVariables:"ignore",unusedFunctions:"ignore",unusedMembers:"ignore"},t.defaultValidationSettings={target:"ES5",baseUrl:"",module:"",lint:t.defaultLintSettings},t._internalDefaultValidationSettings={scope:"/",baseUrl:"",noImplicitAny:!1,noLib:!1,extraLibs:["vs/text!vs/languages/typescript/lib/lib.d.ts"],semanticValidation:!0,syntaxValidation:!0,target:"ES5",module:"",lint:t.defaultLintSettings,diagnosticClassifier:t.impilictAnyClassifier},t.defaultSuggestSettings={alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1};var c=function(){function e(e,t,n){this._raw=e,this._defaultCompileSettings=t,this._defaultSuggestSettings=n}return Object.defineProperty(e.prototype,"raw",{get:function(){return this._raw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validate",{get:function(){return this._compileSettings||(this._compileSettings=this._ensureCompileSettings()),this._compileSettings.slice(0)},enumerable:!0,configurable:!0}),e.prototype._ensureCompileSettings=function(){var e=this;if(!this._raw||!this._raw.validate)return[this._defaultCompileSettings];if(Array.isArray(this._raw.validate)){if(0===this._raw.validate.length)return[this._defaultCompileSettings]}else this._raw.validate=[this._raw.validate];var t=i.newTrie(),r=[],a=!1;this._raw.validate.forEach(function(e){var r,i=e.scope;s.isFalsyOrWhitespace(i)?i=o.sep:(i=o.makeAbsolute(i),i=o.normalize(i)),e.scope=i,a=a||i===o.sep,s.isFalsyOrWhitespace(e.module)&&!s.isFalsyOrWhitespace(e.moduleGenTarget)&&(e.module=e.moduleGenTarget),s.isFalsyOrWhitespace(e.target)&&!s.isFalsyOrWhitespace(e.codeGenTarget)&&(e.target=e.codeGenTarget),r=t.lookUp(e.scope),r&&(e=n.withDefaults(e,r.element)),t.insert(e.scope,e)}),a||t.insert(o.sep,this._defaultCompileSettings);for(var l;(l=t.fringe()).length>0;)l.forEach(function(i){for(var s=i.element,a=i.parent(),l=[e._defaultCompileSettings];null!==a;)l.push(a.element),a=a.parent();for(;0!==l.length;)s=n.withDefaults(s,l.pop());s.baseUrl=o.normalize(s.baseUrl),s.baseUrl=o.makeAbsolute(s.baseUrl),t.remove(i),r.unshift(s)});return r.sort(function(e,t){return e.scope.length-t.scope.length}),r},Object.defineProperty(e.prototype,"suggest",{get:function(){return this._suggestSettings||(this._suggestSettings=this._raw&&this._raw.suggest?n.withDefaults(this._raw.suggest,this._defaultSuggestSettings):this._defaultSuggestSettings),n.clone(this._suggestSettings)},enumerable:!0,configurable:!0}),e}();t.sanitize=a,t.equal=l}),define("vs/base/sortedList",["require","exports","vs/base/arrays"],function(e,t,n){var r=function(){function e(t){this.keys=[],this.values=[],this.comparator=t||e.DEFAULT_COMPARATOR}return Object.defineProperty(e.prototype,"count",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.getValueByIndex=function(e){return e>=0&&e<this.values.length?this.values[e]:null},e.prototype.getKey=function(e){return e>=0&&e<this.keys.length?this.keys[e]:null},e.prototype.getKeys=function(){return new i(this.keys)},e.prototype.getValue=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0?this.values[t]:null},e.prototype.getValues=function(){return new i(this.values)},e.prototype.indexOfKey=function(e){if(!e)throw new Error("Key must be defined.");return n.binarySearch(this.keys,e,this.comparator)},e.prototype.add=function(e,t){if(!e||!t)throw new Error("Key and value must be defined.");for(var n=0;n<this.keys.length&&this.comparator(e,this.keys[n])>0;)n++;this.keys.splice(n,0,e),this.values.splice(n,0,t)},e.prototype.remove=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0&&(this.values.splice(t,1),this.keys.splice(t,1)),t>=0},e.prototype.getIterator=function(){return new o(this.keys,this.values)},e.DEFAULT_COMPARATOR=function(e,t){return t>e?-1:e>t?1:0},e}();t.SortedList=r;var o=function(){function e(e,t){this.keys=e,this.values=t,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.keys.length<this.index?null:{key:this.keys[this.index],value:this.values[this.index]}},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.keys.length},e.prototype.hasNext=function(){return this.index+1<this.keys.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.keys=null,this.values=null},e}(),i=function(){function e(e){this.values=e,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.values.length<this.index?null:this.values[this.index]},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.values.length},e.prototype.hasNext=function(){return this.index+1<this.values.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.values=null},e}()}),define("vs/languages/typescript/features/validationStrategy",["require","exports","vs/base/lifecycle","vs/base/sortedList","vs/platform/services"],function(e,t,n,r,o){function i(e,t){var n=e.reason-t.reason;if(0!==n)return n;if(n=e.type-t.type,0!==n)return n;if(n=t.timestamp-e.timestamp,0!==n)return n;var r=e.resource.toString(),o=t.resource.toString();return o>r?-1:r>o?1:0}!function(e){e[e.ItChanged=1]="ItChanged",e[e.SomeChanged=2]="SomeChanged"}(t.ValidationReason||(t.ValidationReason={}));var s=t.ValidationReason;!function(e){e[e.Syntax=1]="Syntax",e[e.Semantic=2]="Semantic"}(t.ValidationType||(t.ValidationType={}));var a=t.ValidationType,l=function(){function e(e){this._data=new r.SortedList(e)}return Object.defineProperty(e.prototype,"count",{get:function(){return this._data.count},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this._data.indexOfKey(e);return 0>t?(this._data.add(e,!0),!0):!1},e.prototype.remove=function(e){for(var t=this.getIterator(),n=[],r=!1;t.moveNext();)e(t.current)&&(n.push(t.current),r=!0);for(;n.length>0;)this._data.remove(n.pop());return r},e.prototype.contains=function(e){return this._data.indexOfKey(e)>=0},e.prototype.first=function(){var e=this._data.getKey(0);return null!==e&&this._data.remove(e),e},e.prototype.peek=function(){return this._data.getKey(0)},e.prototype.getIterator=function(){return this._data.getKeys()},e}(),c=function(){function e(e,t){var n=this;this._disposeables=[],this._queue=new l(i),this._scheduleHandle=-1,this._resourceService=e.resourceService,this._disposeables.push(this._resourceService.addListener2(o.ResourceEvents.REMOVED,function(e){return n._onResourceRemoved(e.url)})),this._validationCallback=t}return e.prototype._onResourceRemoved=function(e){this._queue.remove(function(t){return t.resource.equals(e)}),0===this._queue.count&&clearTimeout(this._scheduleHandle)},e.prototype.dispose=function(){n.disposeAll(this._disposeables),clearTimeout(this._scheduleHandle),this._queue=null},e.prototype.scheduleValidation=function(e,t){if(e===s.ItChanged)this._queue.remove(function(e){return e.resource.equals(t.getAssociatedResource())}),this._queue.add({reason:e,type:a.Syntax,resource:t.getAssociatedResource(),timestamp:Date.now()}),this._queue.add({reason:e,type:a.Semantic,resource:t.getAssociatedResource(),timestamp:Date.now()});else{for(var n=!1,r=this._queue.getIterator();r.moveNext()&&!n;)r.current.resource.equals(t.getAssociatedResource())&&r.current.reason===s.ItChanged&&r.current.type===a.Semantic&&(n=!0);n||this._queue.add({reason:e,type:a.Semantic,resource:t.getAssociatedResource(),timestamp:Date.now()})}this._scheduleNext()},e.prototype._scheduleNext=function(){var e=this;if(0!==this._queue.count){clearTimeout(this._scheduleHandle);var t=this._queue.peek().reason===s.ItChanged?0:1e3;this._scheduleHandle=setTimeout(function(){var t=e._queue.first();e._validationCallback(t.resource,t.type,t.reason).then(function(){e._scheduleNext()},function(t){console.error(t),e._scheduleNext()}),e._scheduleNext()},t)}},e}();t.ValidationStrategy=c}),define("vs/languages/typescript/project/project",["require","exports","vs/base/lib/winjs.base"],function(e,t,n){var r=function(){function e(e){this._delegates=e}return e.prototype.resolve=function(e){return this._doResolve(e,0)},e.prototype._doResolve=function(e,t){var r=this;return t>=this._delegates.length?n.TPromise.as(null):this._delegates[t].resolve(e).then(function(o){return o?n.TPromise.as(o):r._doResolve(e,t+1)})},e.prototype.accept=function(e){return this._doAccept(e,0)},e.prototype._doAccept=function(e,t){var r=this;return t>=this._delegates.length?n.TPromise.as(null):this._delegates[t].accept(e).then(function(){return r._doAccept(e,t+1)})},e}();t.CompositeContentResolver=r}),define("vs/base/db/indexeddb",["require","exports","vs/base/types","vs/base/lib/winjs.base","vs/base/errors"],function(e,t,n,r,o){function i(){return"undefined"!=typeof indexedDB}function s(e,t,n){return new r.TPromise(function(r,o){var i;i="undefined"!=typeof t?indexedDB.open(e,t):indexedDB.open(e),i.onerror=function(e){return o(e)},i.onsuccess=function(e){return r(new u(e.target.result))},i.onupgradeneeded=function(e){if(!n)return o(e);var t=e.target.result;n({createDataStore:function(e){var n=t.createObjectStore(e.name,{keyPath:e.keyPath,autoIncrement:e.autoIncrement});e.index&&e.index.forEach(function(e){return n.createIndex(e.name,e.keyPath,e.options)})},deleteDataStore:function(e){t.deleteObjectStore(e)}},t)}})}function a(e){return new r.TPromise(function(t,n){e.onsuccess=function(){t(e)},e.onerror=function(t){n(e.error||t)}})}t.canBeUsed=i,function(e){e[e.ReadOnly=0]="ReadOnly",e[e.ReadWrite=1]="ReadWrite",e[e.VersionChange=2]="VersionChange"}(t.TransactionMode||(t.TransactionMode={}));var l,l=t.TransactionMode;!function(e){function t(t){return e[t]?e[t].toLowerCase():null}e.toString=t}(l=t.TransactionMode||(t.TransactionMode={})),function(e){e[e.Next=0]="Next",e[e.NextUnique=1]="NextUnique",e[e.Prev=2]="Prev",e[e.PrevUnique=3]="PrevUnique"}(t.Direction||(t.Direction={}));var c,c=t.Direction;!function(e){function t(t){return e[t]?e[t].toLowerCase():null}e.toString=t}(c=t.Direction||(t.Direction={})),t.openDatabase=s;var u=function(){function e(e){this._db=e}return Object.defineProperty(e.prototype,"db",{get:function(){return this._db},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._db.close()},e.prototype.createTransaction=function(e,t){return"undefined"!=typeof t?this._db.transaction(e,l.toString(t)):this._db.transaction(e)},e.prototype.objectStore=function(e){return this._db.objectStoreNames.contains(e)?new d(e,this):null},e}();t.Database=u;var d=function(){function e(e,t){this._name=e,this._database=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._database.db.transaction(this._name).objectStore(this._name)},enumerable:!0,configurable:!0}),e.prototype.executeTransaction=function(e,t){var n=this;return new r.TPromise(function(r,i){var s,a;try{s=n._database.db.transaction(n._name,l.toString(e))}catch(c){return"InvalidStateError"===c.name&&(c=o.canceled()),i(c)}s.onerror=function(e){return i(e.target.error)},s.oncomplete=function(){return r(a)},s.onabort=function(){return i(o.canceled())};try{a=t(s.objectStore(n._name),s)}catch(c){s.abort(),i(c)}})},e.prototype.openCursor=function(e,t,n,r){return p.openCursor(this,null,e,t,n,r)},e.prototype.openIndexCursor=function(e,t,n,r,o){var i=this;return this.executeTransaction(t,function(){return p.openCursor(i,e,t,n,r,o)}).then(function(e){return e})},e.prototype.get=function(e){return this.executeTransaction(l.ReadOnly,function(t){return a(t.get(e))}).then(function(e){return e}).then(function(e){return e.result})},e}();t.ObjectStore=d;var p;!function(e){function t(e,t,o,i,s,a){var l,u=c.Next;return n.isFunction(i)?a=i:n.isFunction(s)?(l=i,a=s):(l=i,u=s),new r.TPromise(function(n,r){var i,s=[];e.executeTransaction(o,function(e){var n;n=t?e.index(t).openCursor(l,c.toString(u)):e.openCursor(l,c.toString(u)),n.onsuccess=function(t){var n=t.target;n.result&&s.push(a(n.result.value,n.result,e))},n.onerror=function(e){return i=e}}).then(function(){i?r(i):n(s)},r)})}e.openCursor=t}(p||(p={}))});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/project/languageServiceHosts",["require","exports","vs/base/collections","vs/base/lifecycle"],function(e,t,n,r){var o=function(){function e(e){this._original=e}return e.NewInstanceIfRequired=function(t){return t.getLength()>1e6?new e(t):t},e.prototype._getEmptyValue=function(){if(!this._emptyValue){var e=this._original.getLength(),t=this._original.getText(0,e);this._emptyValue=t.replace(/[^\r\n]/g," ")}return this._emptyValue},e.prototype.getText=function(e,t){return this._getEmptyValue().substring(e,t)},e.prototype.getLength=function(){return this._getEmptyValue().length},e.prototype.isOpen=function(){return this._original.isOpen()},e.prototype.getVersionId=function(){return this._original.getVersionId()},e.prototype.getLineStartPositions=function(){return this._original.getLineStartPositions()},e.prototype.getChangeRange=function(e){return this._original.getChangeRange(e)},e}(),i=function(){function e(e,t){this._newSnapshot=e;var n=t.getVersionId()-this._newSnapshot.getVersionId();this._versionIdDelta=1+Math.max(0,n)}return e.prototype.isOpen=function(){return this._newSnapshot.isOpen()},e.prototype.getVersionId=function(){return this._newSnapshot.getVersionId()+this._versionIdDelta},e.prototype.getText=function(e,t){return this._newSnapshot.getText(e,t)},e.prototype.getLength=function(){return this._newSnapshot.getLength()},e.prototype.getLineStartPositions=function(){return this._newSnapshot.getLineStartPositions()},e.prototype.getChangeRange=function(e){return this._newSnapshot.getChangeRange(e)},e}(),s=function(){function e(e){this._versionId=e.getVersionId(),this._value=e.getValue(),this._length=this._value.length,this._lineStarts=[];for(var t=0,n=e.getLineCount();n>t;t++)this._lineStarts.push(e.getLineStart(t+1))}return e.prototype.isOpen=function(){return!0},e.prototype.getVersionId=function(){return this._versionId},e.prototype.getText=function(e,t){return this._value.substring(e,t)},e.prototype.getLength=function(){return this._length},e.prototype.getLineStartPositions=function(){return this._lineStarts},e.prototype.getChangeRange=function(){return null},e}(),a=function(){function e(e){this._snapshot=e}return e.prototype.isOpen=function(){return!1},e.prototype.getVersionId=function(){return-1},e.prototype.getText=function(e,t){return this._snapshot.getText(e,t)},e.prototype.getLength=function(){return this._snapshot.getLength()},e.prototype.getLineStartPositions=function(){return this._snapshot.getLineStartPositions()},e.prototype.getChangeRange=function(){return null},e}(),l=function(){function e(){}return e.prototype.log=function(){},e}();t.NullLogger=l;var c=function(e){function t(t,n,r){var o=this;e.call(this),this._snapshots=Object.create(null),this._disposables=[],this._resourceService=t.resourceService,this._mode=n,this._resourceFilter=r,this._compilationSettings=Object.create(null),this._disposables.push(this._resourceService.addListener2("resource.added",function(){return o._resetStateId()})),this._disposables.push(this._resourceService.addListener2("resource.removed",function(){return o._resetStateId()})),this._disposables.push(this._resourceService.addListener2("resource.changed",function(){return o._resetStateId()}))}return __extends(t,e),t.prototype.dispose=function(){this._snapshots=Object.create(null),r.disposeAll(this._disposables)},t.prototype.getStateId=function(){return this._stateId||(this._stateId=Math.random()),this._stateId},t.prototype._resetStateId=function(){this._stateId=null},t.prototype._insert=function(e,t){t=o.NewInstanceIfRequired(t);var n=this._snapshots[e];return!n||n.getVersionId()<t.getVersionId()?(this._snapshots[e]=t,!0):n.getVersionId()===t.getVersionId()?!1:n.getVersionId()>t.getVersionId()?(this._snapshots[e]=new i(t,n),!0):void 0},t.prototype._sync=function(){if(this._lastSyncedState!==this.getStateId()){var e=Object.create(null);for(var t in this._snapshots)this._snapshots[t]instanceof s&&(e[t]=!0);for(var n=this._resourceService.all(),r=0,o=n.length;o>r;r++)if(this._resourceFilter(n[r])){var i=n[r],a=i.getAssociatedResource().toString();this._insert(a,new s(i))&&this._resetStateId(),delete e[a]}for(var t in e)delete this._snapshots[t],this._stateId=null;this._lastSyncedState=this.getStateId()}},t.prototype.getScriptFileNames=function(){return this._sync(),Object.keys(this._snapshots)},t.prototype.getScriptVersion=function(e){return this._sync(),String(this._snapshots[e].getVersionId())},t.prototype.getScriptIsOpen=function(e){return this._sync(),this._snapshots[e].isOpen()},t.prototype.getScriptSnapshot=function(e){return this._sync(),this._snapshots[e]},t.prototype.getLocalizedDiagnosticMessages=function(){return null},t.prototype.getCancellationToken=function(){return{isCancellationRequested:function(){return!1}}},t.prototype.getCurrentDirectory=function(){return""},t.prototype.getDefaultLibFilename=function(){return"vs/text!vs/languages/typescript/lib/lib.d.ts"},t.prototype.getCompilationSettings=function(){return this._compilationSettings},t}(l);t.MirrorModelLanguageServiceHost=c;var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.addScriptSnapshot=function(e,t){return this.getScriptSnapshot(e)instanceof s?!1:this._insert(e,new a(t))},t.prototype.removeScriptSnapshot=function(e){return this.getScriptSnapshot(e)instanceof s?!1:n.contains(this._snapshots,e)?(delete this._snapshots[e],!0):!1},t}(c);t.ProjectLanguageServiceHost=u}),define("vs/base/graph",["require","exports","vs/base/types","vs/base/collections"],function(e,t,n,r){function o(e){return{data:e,incoming:{},outgoing:{}}}t.newNode=o;var i=function(){function e(e){this._hashFn=e,this._nodes=Object.create(null)}return e.prototype.roots=function(){var e=[];return r.forEach(this._nodes,function(t){n.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e},e.prototype.traverse=function(e,t,n){var r=this.lookup(e);r&&this._traverse(r,t,{},n)},e.prototype._traverse=function(e,t,n,o){var i=this,s=this._hashFn(e.data);if(!r.contains(n,s)){n[s]=!0,o(e.data);var a=t?e.outgoing:e.incoming;r.forEach(a,function(e){return i._traverse(e.value,t,n,o)})}},e.prototype.insertEdge=function(e,t){var n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing[this._hashFn(t)]=r,r.incoming[this._hashFn(e)]=n},e.prototype.removeNode=function(e){var t=this._hashFn(e);delete this._nodes[t],r.forEach(this._nodes,function(e){delete e.value.outgoing[t],delete e.value.incoming[t]})},e.prototype.lookupOrInsertNode=function(e){var t=this._hashFn(e),n=r.lookup(this._nodes,t);return n||(n=o(e),this._nodes[t]=n),n},e.prototype.lookup=function(e){return r.lookup(this._nodes,this._hashFn(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this._nodes).length},enumerable:!0,configurable:!0}),e}();t.Graph=i}),define("vs/languages/typescript/modulePaths",["require","exports","vs/base/paths","vs/base/strings"],function(e,t,n,r){function o(e,t){return{value:n.join(n.dirname(t),e)}}function i(e,t,o){void 0===o&&(o=r.empty);var i=n.extname(e);switch(i){case".js":case".ts":e=e.substring(0,e.length-i.length);break;default:i=n.extname(t)}var a=n.isRelative(e)?n.join(n.dirname(t),e):n.join(o,e);return{value:a+i,alternateValue:a+s}}var s=".d.ts";t.internal=o,t.external=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/project/dependencyResolver",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2","vs/base/lib/winjs.base","vs/base/assert","vs/base/graph","vs/base/severity","vs/base/collections","vs/base/network","vs/base/hash","vs/base/strings","vs/base/paths","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/modulePaths","vs/base/lifecycle","vs/languages/typescript/typescript"],function(e,t,n,r,o,i,s,a,l,c,u,d,p,h,m,f){var g=function(){function t(e,t,n){this._implicitDependenciesLoaded=!1,this._disposables=[],this._requestService=e.requestService,this._markerService=e.markerService,this._compileConfig=n,this._basepath=this._requestService.getRequestUrl("root",u.empty,!0),this._resolver=t}return t.prototype.dispose=function(){this._disposables=m.disposeAll(this._disposables)},t.prototype.resolve=function(e,t){var n=this,o=[];if(this._implicitDependenciesLoaded||o.push(this._loadImplicitDependencies(t)),0===e.toString().indexOf(this._basepath)){var i,s=e.toString(),a=this._requestService.getPath("root",e);o.push(this._loadImplicitDeclaredDependencies(t,a)),i=t.getScriptSnapshot(s)?this._loadDeclaredDependencies(t,{filename:a,snapshot:t.getScriptSnapshot(s)}):this._resolver.resolve(a).then(function(e){var r=n._normalizedSnapshot(e.value);return t.addScriptSnapshot(s,r),n._loadDeclaredDependencies(t,{filename:a,snapshot:r})}),o.push(i)}return r.TPromise.join(o).then(function(e){var t=e.reduce(function(e,t){return e+t},0);return t})},t.prototype._loadDeclaredDependencies=function(e,t,n,o){var i=this;return void 0===n&&(n=Object.create(null)),void 0===o&&(o=!0),n[t.filename]=!0,this._loadDeclaredDependenciesFlat(e,t,o).then(function(t){for(var o=[],s=0,a=0,l=t.length;l>a;a++)n[t[a].filename]||(e.addScriptSnapshot(d.join(i._basepath,t[a].filename),t[a].snapshot)&&(s+=1),o.push(i._loadDeclaredDependencies(e,t[a],n,!1)));return r.TPromise.join(o).then(function(e){return e.reduce(function(e,t){return e+t},s)})})},t.prototype._loadDeclaredDependenciesFlat=function(e,t,o){var i=this,a=p.preProcessFile(t.snapshot.getText(0,t.snapshot.getLength()),!0),c=a.importedFiles.concat(a.referencedFiles),u=a.importedFiles.length,m=[],f=o?[]:void 0;return r.TPromise.join(c.map(function(e,r){var a=r>=u?h.internal(e.filename,t.filename):h.external(e.filename,t.filename,i._compileConfig.baseUrl);return i._loadWithContentResolver(a.value,a.alternateValue).then(function(i){if(i)m.push(i);else if(o&&r>=u){var l=t.snapshot.getLineStartPositions(),c=p.getLineAndCharacterOfPosition(l,e.pos),d=p.getLineAndCharacterOfPosition(l,e.end);f.push({message:n.localize("vs_languages_typescript_project_dependencyResolver",0,a.value),severity:s.Error,startLineNumber:c.line,startColumn:c.character,endLineNumber:d.line,endColumn:d.character})}})})).then(function(){return o&&i._markerService.changeOne("typescript.dependencies",l.URL.fromValue(d.join(i._basepath,t.filename)),f),m})},t.prototype._loadWithContentResolver=function(e,t){var n=this;return this._resolver.resolve(e).then(function(o){return o?r.TPromise.as({filename:e,snapshot:n._normalizedSnapshot(o.value)}):t?n._loadWithContentResolver(t,null):null})},t.prototype._loadImplicitDeclaredDependencies=function(e,t){var n=this,o=[],i=Object.create(null);do t=d.dirname(t),o.push(this._loadWithContentResolver(d.join(t,"_references.ts"),d.join(t,"_references.js")).then(function(t){return t?n._loadDeclaredDependencies(e,t,i,!1):r.TPromise.as(0)}));while("."!==t&&"/"!==t&&"\\"!==t);return r.TPromise.join(o).then(function(e){return e.reduce(function(e,t){return e+t},0)})},t.prototype._loadImplicitDependencies=function(e){var t=this,n=0;return r.Promise.join(this._compileConfig.extraLibs.map(function(r){return t._loadBaselib(r).then(function(t){t&&e.addScriptSnapshot(t.filename,t.snapshot)&&(n+=1)})})).then(function(){return t._implicitDependenciesLoaded=!0,n})},t.prototype._loadBaselib=function(t){var n=this;return 0===t.indexOf("vs/text!")||0===d.extname(t).length?new r.TPromise(function(r,o){e([t],function(e){r({filename:t,snapshot:n._normalizedSnapshot(e)})},o)}):this._requestService.makeRequest({url:t}).then(function(e){return 200===e.status?{filename:t,snapshot:n._normalizedSnapshot(e.responseText)}:null},function(e){return console.error("failed to load base lib with path "+t),console.error(e),null})},t.prototype._normalizedSnapshot=function(e){return p.ScriptSnapshot.fromString(e.replace(/\r\n/g,"\n"))},t.prototype.isExtraLib=function(e){return"string"==typeof e?-1!==this._compileConfig.extraLibs.indexOf(e):-1!==this._compileConfig.extraLibs.indexOf(e.toString())},t}();t.DependencyResolver2=g;var v=function(e){function t(t,n,r){var o=this;e.call(this,t,n,r),this._resourceService=t.resourceService,this._disposables.push(t.eventService.addListener2(f.Events.ResourceSetChanged,function(){return o._resetGraph()})),this._disposables.push(this._resourceService.addListener2("resource.changed",function(e){e.url.toString().match(/_references\.(ts|js)$/)&&o._resetGraph()})),this._resetGraph()}return __extends(t,e),t.prototype._resetGraph=function(){this._cache=new i.Graph(function(e){return e.filename})},t.prototype._loadDeclaredDependenciesFlat=function(t,n,i){var s=this,l=this._cache.lookup({filename:n.filename,state:{}}),c=l?l.data.state:{},u=!1;if(this._validateState(n,t,c)){for(var p=a.values(l.outgoing),h=[],m=0,f=p.length;f>m&&!u;m++){var g=p[m].data,v=d.join(this._basepath,g.filename),b=t.getScriptSnapshot(v);b?h.push({filename:g.filename,snapshot:b}):u=!0}if(!u)return r.TPromise.as(h)}else u=!0;return o.ok(u),e.prototype._loadDeclaredDependenciesFlat.call(this,t,n,i).then(function(e){var t={filename:n.filename,state:c};return e.forEach(function(e){return s._cache.insertEdge(t,{filename:e.filename,state:{}})}),e})},t.prototype._validateState=function(e,t,n){var r,o=d.join(this._basepath,e.filename);return t.getScriptSnapshot(o)?n.version!==(r=t.getScriptVersion(o))?(n.version=r,n.referenceState=this._computeReferenceState(e),!1):!0:(n.version=void 0,n.referenceState=this._computeReferenceState(e),!1)},t.prototype._computeReferenceState=function(e){var t=p.preProcessFile(e.snapshot.getText(0,e.snapshot.getLength()),!0),n=11;return t.importedFiles.concat(t.referencedFiles).forEach(function(e){n=c.combine(n,c.computeMurmur2StringHashCode(e.filename)+(59+e.pos)+(61+e.end))}),n},t}(g);t.DependencyResolver3=v}),define("vs/languages/typescript/project/typescriptProject",["require","exports","vs/base/strings","vs/base/lifecycle","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/project/languageServiceHosts","vs/languages/typescript/project/dependencyResolver"],function(e,t,n,r,o,i,s){var a=function(){function e(e,t,n,r,o,i,a){this._disposables=[],this._instantiationService=e.instantiationService,this._requestService=e.requestService,this._dependencyResolver=e.instantiationService.createInstance(s.DependencyResolver3,o,i),this._contentResolver=o,this._mode=t,this._prefix=n,this._resourceFilter=r,this._compileConfig=i,this._suggestConfig=a}return e.prototype.dispose=function(){this._disposables=r.disposeAll(this._disposables)},e.prototype.root=function(){return this._prefix},e.prototype.compileConfiguration=function(){return this._compileConfig},e.prototype.suggestConfiguration=function(){return this._suggestConfig},e.prototype.documentRegistry=function(){return this._documentRegistry||(this._documentRegistry=o.createDocumentRegistry()),this._documentRegistry},e.prototype.syntaxLanguageService=function(){if(!this._syntaxLanguageService){var e=this._instantiationService.createInstance(i.MirrorModelLanguageServiceHost,this._mode,this._resourceFilter);this._applyCompileConfig(e.getCompilationSettings()),e.getCompilationSettings().noLib=!0;var t=o.createLanguageService(e,this.documentRegistry());t.host=e,this._syntaxLanguageService=t,this._disposables.push(e)}return this._syntaxLanguageService},e.prototype.semanticLanguageService=function(){if(!this._semanticLanguageService){var e=this._instantiationService.createInstance(i.ProjectLanguageServiceHost,this._mode,this._resourceFilter);this._applyCompileConfig(e.getCompilationSettings());var t=o.createLanguageService(e,this.documentRegistry());t.host=e,this._semanticLanguageService=t,this._disposables.push(e)}return this._semanticLanguageService},e.prototype.dependencyResolver=function(){return this._dependencyResolver},e.prototype.contentResolver=function(){return this._contentResolver},e.prototype.requestService=function(){return this._requestService},e.prototype._applyCompileConfig=function(e){e.allowNonTsExtensions=!0,e.noImplicitAny=this._compileConfig.noImplicitAny,e.target=n.equalsIgnoreCase("ES3",this._compileConfig.target)?o.ScriptTarget.ES3:o.ScriptTarget.ES5,e.module=n.equalsIgnoreCase("commonjs",this._compileConfig.module)?o.ModuleKind.CommonJS:n.equalsIgnoreCase("amd",this._compileConfig.module)?o.ModuleKind.AMD:o.ModuleKind.None},e}();t.TypeScriptProject=a});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/project/projectResolver",["require","exports","vs/base/env","vs/base/hash","vs/base/strings","vs/base/paths","vs/base/errors","vs/base/lifecycle","vs/base/collections","vs/base/db/indexeddb","vs/base/lib/winjs.base","vs/platform/services","vs/languages/typescript/typescript","vs/base/trie"],function(e,t,n,r,o,i,s,a,l,c,u,d,p,h){var m;
!function(e){function t(e){return"monaco_"+r.computeMurmur2StringHashCode(e)}function n(t,n){return c.openDatabase(t,1,function(t,n){for(var r=0,o=n.objectStoreNames.length;o>r;r++)t.deleteDataStore(n.objectStoreNames.item(r));t.createDataStore({name:e.storeName,keyPath:e.keyPath,index:[e.workspaceIndexOptions]})}).then(function(t){return n.push(t),t.objectStore(e.storeName)},function(){return null})}e.databaseName=t,e.keyPath="workspaceAbsolutePath",e.storeName="cache",e.workspaceIndexOptions={name:"workspaceName",keyPath:"workspaceName",options:{unique:!1}},e.openStore=n}(m||(m={}));var f=function(){function e(){}return e.prototype.resolve=function(){return null},e.Instance=new e,e}();t.NullProjectResolver=f;var g;!function(e){function t(e,t,n){for(var r=h.newTrie({},function(e){return e.split(i.sep).filter(function(e){return!o.isFalsyOrWhitespace(e)})}),s=h.newTrie(),a=!1,l=0,c=e.length;c>l;l++){var u=e[l];u&&u.workspacePath&&(u.type===d.Files.FileChangeType.DELETED?s.insert(u.workspacePath,u):(u.type===d.Files.FileChangeType.ADDED||u.type===d.Files.FileChangeType.UPDATED)&&r.insert(u.workspacePath,u))}s.roots().forEach(function(e){e.element.workspacePath&&(n(e.element.workspacePath),a=!0)});for(var p=r.roots();p.length>0;){var m=p.shift(),u=m.element;if(u.type===d.Files.FileChangeType.ADDED)u.workspacePath&&t(u.workspacePath);else if(u.type===d.Files.FileChangeType.UPDATED){var f=m.children(),c=f.length;if(0===c)continue;for(var g=0,l=0;c>l;l++)f[l].element.type===d.Files.FileChangeType.ADDED&&(g+=1);g>1?u.workspacePath&&(t(u.workspacePath),a=!0):p.push.apply(p,f)}}return a}e.minimize=t}(g=t.FileEventProcessing||(t.FileEventProcessing={}));var v=function(){function e(e,t){var n=this;this._fileService=e.fileService,this._eventService=e.eventService,this._options=t,this._disposables=[];var r=e.eventService.addListener(d.Files.EventType.FILE_CHANGES,function(e){var t=e.filterWorkspacePath(function(e,t){return!t.some(function(e){return".git"===e||"node_modules"===e})}).changes;g.minimize(t,function(e){return n._handleAdded(e)},function(e){return n._handleDelete(e)})&&n._eventService.emit(p.Events.ResourceSetChanged)});this._disposables.push({dispose:r}),this._pendingOperations=[u.TPromise.timeout(0).then(function(){return n._resolveStatsAndContents("/")})]}return e.prototype.dispose=function(){this._disposables=a.disposeAll(this._disposables)},e.prototype._handleDelete=function(e){this._pendingOperations.push(u.TPromise.as({removed:[e]}))},e.prototype._handleAdded=function(e){this._pendingOperations.push(this._resolveStatsAndContents(e))},e.prototype.resolve=function(){var e=this,t=this._pendingOperations.length;if(0===t)return u.TPromise.as({});if(this._resolverError)return u.TPromise.wrapError(this._resolverError);var n={added:[],removed:[],hasChanges:!1};return u.TPromise.join(this._pendingOperations.splice(0,t).map(function(t){return t.then(function(e){n.added.push.apply(n.added,e.added),n.removed.push.apply(n.removed,e.removed),n.hasChanges=n.hasChanges||e.hasChanges},function(t){if(!s.isPromiseCanceledError(t))throw e._resolverError=t,t})})).then(function(){return n},function(t){e._resolverError=t})},e.prototype._resolveStatsAndContents=function(e){var t=this;return this._fetchStats(e).then(function(n){return t._fetchContents(e,n)},function(e){if(404===e.status)return[];throw e}).then(function(e){return{added:e}})},e.prototype._fetchStats=function(e){return this._fileService.resolveFileStats(e,this._options.pattern)},e.prototype._fetchContents=function(e,t){return this._fileService.resolveContents(t.map(function(e){return e.path}))},e}(),b=function(){function e(){this._value=Object.create(null)}return e.prototype.change=function(){this._value=Object.create(null)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(),y=function(e){function t(t,n){e.call(this,t,n),this._workspaceName=t.contextService.getWorkspace()?t.contextService.getWorkspace().name:"__NO_WORKSPACE__",this._databaseName=m.databaseName(n.modeId),this._state=new b}return __extends(t,e),t.prototype._getObjectStore=function(){return this._objectStorePromise||(this._objectStorePromise=m.openStore(this._databaseName,this._disposables)),this._objectStorePromise},t.prototype._handleDelete=function(t){var n=this;this._pendingOperations.push(this._getObjectStore().then(function(e){return e?e.openIndexCursor(m.workspaceIndexOptions.name,c.TransactionMode.ReadWrite,IDBKeyRange.only(n._workspaceName),function(e,r,o){i.isEqualOrParent(e.content.path,t)&&(o.delete(e.workspaceAbsolutePath),n._state.change()),r.continue()}):void 0})),e.prototype._handleDelete.call(this,t)},t.prototype._resolveStatsAndContents=function(t){var n=this,r=this._state.value;return e.prototype._resolveStatsAndContents.call(this,t).then(function(e){return e.hasChanges=r!==n._state.value,e})},t.prototype._fetchContents=function(t,n){var r=this;return this._getObjectStore().then(function(o){return o?r._doFetchContents(o,t,n).then(function(e){return e.persistedContents.concat(e.volatileContents)}):e.prototype._fetchContents.call(r,t,n)})},t.prototype._doFetchContents=function(t,n,r){var o=this,a=i.join(this._workspaceName,n),u={},p={volatileContents:[],persistedContents:[]};return r.forEach(function(e){var t=i.join(o._workspaceName,e.path);if(l.lookupOrInsert(u,t,e)!==e)throw new Error("path collision between two different stat objects. path: "+t)}),t.openIndexCursor(m.workspaceIndexOptions.name,c.TransactionMode.ReadWrite,IDBKeyRange.only(this._workspaceName),function(e,t,n){var r=l.lookup(u,e.workspaceAbsolutePath);i.isEqualOrParent(e.workspaceAbsolutePath,a)&&(r&&r.etag===e.content.etag&&d.Files.isIContent(e.content)?(delete u[e.workspaceAbsolutePath],p.persistedContents.push(e.content)):(n.delete(e.workspaceAbsolutePath),o._state.change())),t.continue()}).then(function(){return e.prototype._fetchContents.call(o,n,l.values(u))}).then(function(e){return t.executeTransaction(c.TransactionMode.ReadWrite,function(t){e.forEach(function(e){t.put({workspaceName:o._workspaceName,workspaceAbsolutePath:i.join(o._workspaceName,e.path),content:{resource:void 0,charset:e.charset,etag:e.etag,mime:e.mime,mtime:e.mtime,name:e.name,path:e.path,value:e.value}}),o._state.change(),p.persistedContents.push(e)})}).then(void 0,function(t){if(!s.isPromiseCanceledError(t))throw t;p.volatileContents=e})}).then(function(){return p})},t}(v),_=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._doFetchContents=function(t,n,r){return e.prototype._doFetchContents.call(this,t,n,r).then(function(e){return e.persistedContents.length=0,e})},t}(y),w=function(){function e(e,t){this._delegate=e.fileService?c.canBeUsed()?n.browser.isFirefox?e.instantiationService.createInstance(y,t):e.instantiationService.createInstance(_,t):e.instantiationService.createInstance(v,t):f.Instance}return e.prototype.resolve=function(){return this._delegate.resolve()},e}();t.ProjectResolver=w;var T=function(){function e(e,t){this._disposables=[],this._workspaceName=e.contextService.getWorkspace()?e.contextService.getWorkspace().name:"__NO_WORKSPACE__",this._databaseName=m.databaseName(t)}return e.prototype.dispose=function(){this._disposables=a.disposeAll(this._disposables)},e.prototype.resolve=function(e){if(o.isFalsyOrWhitespace(this._workspaceName))return u.TPromise.as(null);var t=i.join(this._workspaceName,e);return this._getObjectStore().then(function(e){return e?e.get(t).then(function(e){return e?e.content:null}):null})},e.prototype.accept=function(e){var t,n=this;return new u.TPromise(function(r,o){n._getObjectStore().then(function(r){return r?r.openIndexCursor(m.workspaceIndexOptions.name,c.TransactionMode.ReadWrite,IDBKeyRange.only(n._workspaceName),function(n,r){e(n.content),t||r.continue()}):void 0}).then(function(){return r(null)},o)},function(){t=s.canceled()})},e.prototype._getObjectStore=function(){return this._objectStorePromise||(this._objectStorePromise=m.openStore(this._databaseName,this._disposables)),this._objectStorePromise},e}();t.DatabaseContentResolver=T}),define("vs/languages/typescript/features/converter",["require","exports"],function(e,t){function n(e,t){return e.getPositionFromLineAndCharacter(t.lineNumber,t.column)}function r(e,t){return e.getPositionFromLineAndCharacter(t.startLineNumber,t.startColumn)}function o(e,t){return e.getPositionFromLineAndCharacter(t.endLineNumber,t.endColumn)}function i(e,t){t=a(e,t);var n=e.getLineAndCharacterFromPosition(t);return{lineNumber:n.line,column:n.character}}function s(e,t,n,r){if(void 0===r&&(r=!1),t=a(e,t),n=a(e,n),r){var o=e.getLineAndCharacterFromPosition(t);return{startLineNumber:o.line,startColumn:o.character,endLineNumber:o.line,endColumn:o.character}}var o=e.getLineAndCharacterFromPosition(t),i=e.getLineAndCharacterFromPosition(n);return{startLineNumber:o.line,startColumn:o.character,endLineNumber:i.line,endColumn:i.character}}function a(e,t){var n=e.getFullWidth();return t>n?n:t}t.getOffset=n,t.getStartOffset=r,t.getEndOffset=o,t.getPosition=i,t.getRange=s}),define("vs/languages/typescript/features/moduleLinks",["require","exports","vs/base/network","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/modulePaths","vs/languages/typescript/features/converter"],function(e,t,n,r,o,i){function s(e,t){for(var n=0,r=e.referencedFiles.length;r>n;n++){var o=e.referencedFiles[n];if(t>=o.pos&&t<o.end)return{path:o.filename,external:!1}}}function a(e,t){var n=r.getTokenAtPosition(e,t);return n.kind===r.SyntaxKind.StringLiteral&&n.parent.kind===r.SyntaxKind.ExternalModuleReference?{path:n.text,external:!0}:void 0}function l(e,t){var n=r.getTokenAtPosition(e,t);if(n.kind===r.SyntaxKind.StringLiteral&&n.parent.kind===r.SyntaxKind.CallExpression&&"require"===r.getTextOfNode(n.parent.expression))return{path:n.text,external:!0}}function c(e,t){var n=r.getTokenAtPosition(e,t);if(n.kind===r.SyntaxKind.StringLiteral&&n.parent.kind===r.SyntaxKind.ArrayLiteralExpression)return{path:n.text,external:!0}}function u(e,t,r,u,d){for(var p,h=i.getOffset(e,r),m=[s,a,l,c],f=0;!p&&f<m.length;f++)p=m[f](e,h);if(!p)return null;var g,v=p.external?o.external(p.path,t,d):o.internal(p.path,t);return u.getScriptSnapshot(v.value)?g=v.value:v.alternateValue&&u.getScriptSnapshot(v.alternateValue)&&(g=v.alternateValue),g?{resourceUrl:new n.URL(g),range:{startLineNumber:1,startColumn:1,endLineNumber:Number.MAX_VALUE,endColumn:Number.MAX_VALUE}}:null}t.findLink=u}),define("vs/languages/typescript/features/format",["require","exports","vs/languages/typescript/features/converter"],function(e,t,n){function r(e,t,r){var o=t.toString(),i=e.getSourceFile(o);return e.getFormattingEditsForDocument(o,s(r)).map(function(e){return{text:e.newText,range:n.getRange(i,e.span.start(),e.span.end())}})}function o(e,t,r,o){var i=t.toString(),a=e.getSourceFile(i),l=n.getStartOffset(a,r),c=n.getEndOffset(a,r);return e.getFormattingEditsForRange(i,l,c,s(o)).map(function(e){return{text:e.newText,range:n.getRange(a,e.span.start(),e.span.end())}})}function i(e,t,r,o,i){var a=t.toString(),l=e.getSourceFile(a),c=n.getOffset(l,r);return e.getFormattingEditsAfterKeystroke(a,c,o,s(i)).map(function(e){return{text:e.newText,range:n.getRange(l,e.span.start(),e.span.end())}})}function s(e){return{IndentSize:e.tabSize,TabSize:e.tabSize,NewLineCharacter:"\n",ConvertTabsToSpaces:e.insertSpaces,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,PlaceOpenBraceOnNewLineForFunctions:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1}}t.formatDocument=r,t.formatRange=o,t.formatAfterKeystroke=i}),define("vs/languages/typescript/features/logicalSelection",["require","exports","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter"],function(e,t,n,r){function o(e,t,o){for(var i=e.getSourceFile(t.toString()),s=r.getOffset(i,o),a=n.getTokenAtPosition(i,s),l=-1,c=-1,u=[];a;){var d=a.getStart(),p=a.getEnd();(d!==l||p!==c)&&u.unshift({type:"node",range:r.getRange(i,d,p)}),l=d,c=p,a=a.parent}return u}t.compute=o}),define("vs/languages/typescript/features/previewer",["require","exports","vs/base/strings"],function(e,t,n){function r(e,t){if(void 0===t&&(t=n.empty),!e)return{};var r=e.map(function(e){return{tagName:"span",text:e.text,className:e.kind}});return{tagName:"div",className:"ts-symbol "+t,children:r}}function o(e){return e?e.map(function(e){return e.text}).join(n.empty):n.empty}t.html=r,t.plain=o}),define("vs/languages/typescript/features/extraInfo",["require","exports","vs/languages/typescript/features/converter","vs/languages/typescript/features/previewer"],function(e,t,n,r){function o(e,t,o){var i,s=t.toString(),a=e.getSourceFile(s),l=n.getOffset(a,o),c=e.getQuickInfoAtPosition(s,l);if(c){var u=[r.html(c.displayParts),r.html(c.documentation,"documentation")];i={value:"",htmlContent:u,className:"typeInfo ts",range:n.getRange(a,c.textSpan.start(),c.textSpan.end())}}return i}t.compute=o}),define("vs/languages/typescript/features/outline",["require","exports","vs/languages/typescript/features/converter","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,r){function o(e,t){return e.range.startLineNumber<t.range.startLineNumber?-1:e.range.startLineNumber>t.range.startLineNumber?1:e.range.startColumn<t.range.startColumn?-1:e.range.startColumn>t.range.startColumn?1:0}function i(e,t){var n=/\.js$/.test(t.path);return n?l(e,t):s(e,t)}function s(e,t){var n=e.getSourceFile(t.toString()),r=e.getNavigationBarItems(n.filename),i={type:"",label:"",range:void 0,children:[]};return r.filter(function(e){return"<global>"!==e.text}).forEach(function(e){return i.children.push(a(n,e))}),i.children.sort(o)}function a(e,t){var r=t.spans[0],i=n.getRange(e,r.start(),r.end());return{label:t.text,type:c[t.kind]||"variable",range:i,children:t.childItems.map(function(t){return a(e,t)}).sort(o)}}function l(e,t){var i=[],s=e.getSourceFile(t.toString()),a=[];for(s.statements.forEach(function(e){e.kind===r.SyntaxKind.VariableStatement&&e.declarations.forEach(function(e){a.push({label:e.name.text,type:"variable",range:n.getRange(s,e.getStart(),e.getEnd())})}),i.push(e)});i.length;){var l=i.pop(),c="";l.kind===r.SyntaxKind.FunctionDeclaration?c=l.name.text:l.kind===r.SyntaxKind.FunctionExpression&&(l.name?c=l.name.text:l.parent.kind===r.SyntaxKind.PropertyAssignment&&l.parent.name&&(c=""+r.getTextOfNode(l.parent.name)+": function()")),c&&a.push({label:c,type:"function",range:n.getRange(s,l.getStart(),l.getEnd())}),i.push.apply(i,l.getChildren())}return a.sort(o)}var c=Object.create(null);c[r.ScriptElementKind.moduleElement]="module",c[r.ScriptElementKind.classElement]="class",c[r.ScriptElementKind.enumElement]="enum",c[r.ScriptElementKind.interfaceElement]="interface",c[r.ScriptElementKind.memberFunctionElement]="method",c[r.ScriptElementKind.memberVariableElement]="property",c[r.ScriptElementKind.memberGetAccessorElement]="property",c[r.ScriptElementKind.memberSetAccessorElement]="property",c[r.ScriptElementKind.variableElement]="variable",c[r.ScriptElementKind.constElement]="variable",c[r.ScriptElementKind.localVariableElement]="variable",c[r.ScriptElementKind.variableElement]="variable",c[r.ScriptElementKind.functionElement]="function",c[r.ScriptElementKind.localFunctionElement]="function",t.compute=i}),define("vs/languages/typescript/features/occurrences",["require","exports","vs/languages/typescript/features/converter"],function(e,t,n){function r(e,t,r){var o=t.toString(),i=e.getSourceFile(o),s=n.getOffset(i,r),a=e.getOccurrencesAtPosition(o,s);return a?a.map(function(e){return{kind:e.isWriteAccess?"write":null,range:n.getRange(i,e.textSpan.start(),e.textSpan.end())}}):[]}t.compute=r}),define("vs/languages/typescript/features/definitions",["require","exports","vs/base/network","vs/languages/typescript/features/converter"],function(e,t,n,r){function o(e,t,o){var i=t.toString(),s=e.getSourceFile(i),a=r.getOffset(s,o),l=e.getDefinitionAtPosition(i,a);if(!l||0===l.length)return null;var c=l[0];if(!c.fileName)return null;var u=e.getSourceFile(c.fileName);return{resourceUrl:n.URL.fromValue(u.filename),range:r.getRange(u,c.textSpan.start(),c.textSpan.end(),!0)}}function i(){return null}t.findDeclaration=o,t.findTypeDeclaration=i}),define("vs/languages/typescript/features/references",["require","exports","vs/base/network","vs/base/lib/winjs.base","vs/languages/typescript/features/converter","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,r,o,i){function s(e,t,s,c){var u=e.semanticLanguageService(),d=r.TPromise.as(null),p=n.schemas.inMemory===t.getScheme();if(!p&&a(u,t,s)){var h=u.getSourceFile(t.toString()),m=o.getOffset(h,s),f=i.getTokenAtPosition(h,m);if(!f)return console.warn("NO token found at offset"),r.TPromise.as([]);var g=e.dependencyResolver(),v=e.requestService(),b=[],y=i.getTextOfNode(f);d=e.contentResolver().accept(function(e){if(e.value.indexOf(y)>=0){var t=n.URL.fromEncoded(v.getRequestUrl("root",e.path,!0));b.push(g.resolve(t,u.host))}}).then(function(){return r.TPromise.join(b)})}return d.then(function(){return l(u,t,s,c,p)})}function a(e,t,n){var r=t.toString(),s=e.getSourceFile(r),a=o.getOffset(s,n),l=i.getTokenAtPosition(s,a);return l.symbol?l.symbol.declarations.some(function(e){return e.flags&i.NodeFlags.Export?!0:e.flags&i.NodeFlags.Public?!0:e.flags&i.NodeFlags.Protected?!0:!1}):!0}function l(e,t,r,i,s){var a,l=t.toString(),u=e.getSourceFile(l),d=o.getOffset(u,r);return a=s?e.getOccurrencesAtPosition(l,d):e.getReferencesAtPosition(l,d),a?a.filter(function(t){var n=e.getSourceFile(t.fileName);return i||!c(n,t.textSpan.start(),t.textSpan.end())}).map(function(t){var r=e.getSourceFile(t.fileName),i={resourceUrl:n.URL.fromValue(t.fileName),range:o.getRange(r,t.textSpan.start(),t.textSpan.end())};return i}):[]}function c(e,t){var n=i.getTokenAtPosition(e,t).parent;return n&&i.isDeclaration(n)}t.find=s}),define("vs/languages/typescript/features/codelens",["require","exports","vs/base/lib/winjs.base","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter","vs/languages/typescript/features/references"],function(e,t,n,r,o,i){function s(e,t){var n=t.toString(),r=e.getSourceFile(n),i=[];return r.getNamedDeclarations().forEach(function(e){l[e.kind]===!0&&i.push({range:o.getRange(r,e.name.getStart(),e.name.getEnd())})}),i}function a(e,t,r){var o=e.semanticLanguageService().host.getStateId(),s=r.map(function(r){return r.languageModeStateId===o?n.TPromise.as(null):i.find(e,t,r.position,!1)});return n.TPromise.join(s).then(function(e){return{references:e,languageModeStateId:o}})}var l=Object.create(null);l[r.SyntaxKind.ModuleDeclaration]=!0,l[r.SyntaxKind.InterfaceDeclaration]=!0,l[r.SyntaxKind.ClassDeclaration]=!0,l[r.SyntaxKind.ConstructSignature]=!0,l[r.SyntaxKind.GetAccessor]=!0,l[r.SyntaxKind.SetAccessor]=!0,l[r.SyntaxKind.Property]=!0,l[r.SyntaxKind.Method]=!0,l[r.SyntaxKind.FunctionDeclaration]=!0,l[r.SyntaxKind.FunctionExpression]=!0,l[r.SyntaxKind.EnumDeclaration]=!0,l[r.SyntaxKind.EnumMember]=!0,t.getCodeLensSymbols=s,t.findCodeLensReferences=a}),define("vs/languages/typescript/features/parameterHints",["require","exports","vs/base/strings","vs/languages/typescript/features/converter","vs/languages/typescript/features/previewer"],function(e,t,n,r,o){function i(e,t,i){var s=t.toString(),a=e.getSourceFile(s),l=r.getOffset(a,i),c=e.getSignatureHelpItems(s,l);if(!c)return null;var u={currentSignature:c.selectedItemIndex,currentParameter:c.argumentIndex,signatures:[]};return c.items.forEach(function(e){var t={label:n.empty,documentation:null,parameters:[]};t.label+=o.plain(e.prefixDisplayParts),e.parameters.forEach(function(n,r,i){var s=o.plain(n.displayParts),a={label:s,documentation:o.plain(n.documentation),signatureLabelOffset:t.label.length,signatureLabelEnd:t.label.length+s.length};t.label+=s,t.parameters.push(a),r<i.length-1&&(t.label+=o.plain(e.separatorDisplayParts))}),t.label+=o.plain(e.suffixDisplayParts),u.signatures.push(t)}),u}t.compute=i}),define("vs/languages/lib/javascriptSnippets",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2"],function(e,t,n){t.snippets=[{type:"snippet",label:"define",codeSnippet:["define([","	'require',","	'{{require}}'","], function(require, {{factory}}) {","	'use strict';","	{{}}","});"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",0)},{type:"snippet",label:"for",codeSnippet:["for (var {{index}} = 0; {{index}} < {{array}}.length; {{index}}++) {","	var {{element}} = {{array}}[{{index}}];","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",1)},{type:"snippet",label:"foreach",codeSnippet:["{{array}}.forEach(function({{element}}) {","	{{}}","}, this);"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",2)},{type:"snippet",label:"forin",codeSnippet:["for (var {{key}} in {{object}}) {","	if ({{object}}.hasOwnProperty({{key}})) {","		var {{element}} = {{object}}[{{key}}];","		{{}}","	}","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",3)},{type:"snippet",label:"function",codeSnippet:["function {{name}}({{params}}) {","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",4)},{type:"snippet",label:"if",codeSnippet:["if ({{condition}}) {","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",5)},{type:"snippet",label:"ifelse",codeSnippet:["if ({{condition}}) {","	{{}}","} else {","	","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",6)},{type:"snippet",label:"new",codeSnippet:["var {{name}} = new {{type}}({{arguments}});{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",7)},{type:"snippet",label:"switch",codeSnippet:["switch ({{key}}) {","	case {{value}}:","		{{}}","		break;","","	default:","		break;","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",8)},{type:"snippet",label:"while",codeSnippet:["while ({{condition}}) {","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",9)},{type:"snippet",label:"dowhile",codeSnippet:["do {","	{{}}","} while ({{condition}});"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",10)},{type:"snippet",label:"trycatch",codeSnippet:["try {","	{{}}","} catch ({{error}}) {","	","}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",11)},{type:"snippet",label:"log",codeSnippet:["console.log({{message}});{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",12)},{type:"snippet",label:"settimeout",codeSnippet:["setTimeout(function() {","	{{}}","}, {{timeout}});"].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",13)},{type:"snippet",label:"reference",codeSnippet:['/// <reference path="{{}}" />',""].join("\n"),documentationLabel:n.localize("vs_languages_lib_javascriptSnippets",14)}]}),define("vs/languages/typescript/features/typescriptSnippets",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2"],function(e,t,n){t.snippets=[{type:"snippet",label:"foreach =>",codeSnippet:["{{array}}.forEach(({{element}}:{{type}}) => {","	{{}}","});"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",0)},{type:"snippet",label:"jsdoc comment",codeSnippet:["/**"," * {{}}"," */"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",1)},{type:"snippet",label:"ctor",codeSnippet:["/**"," *"," */","constructor() {","	super();","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",2)},{type:"snippet",label:"class",codeSnippet:["/**"," * {{name}}"," */","class {{name}} {","	constructor({{parameters}}) {","		{{}}","	}","}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",3)},{type:"snippet",label:"public method",codeSnippet:["/**"," * {{name}}"," */","public {{name}}() {","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",4)},{type:"snippet",label:"private method",codeSnippet:["private {{name}}() {","	{{}}","}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",5)},{type:"snippet",label:"import statement",codeSnippet:["import {{name}} = require('{{}}');"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",6)},{type:"snippet",label:"do",codeSnippet:["do {","	{{// code...}}","} while ({{a <= 10}});"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",7)},{type:"snippet",label:"get",codeSnippet:["","public get {{value}}() : {{string}} {","	{{return {{}}}}","}",""].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",8)},{type:"snippet",label:"log",codeSnippet:["console.log({{_}});","{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",9)},{type:"snippet",label:"prop",codeSnippet:["","private _{{value}} : {{string}};","public get {{value}}() : {{string}} {","	return this._{{value}};","}","public set {{value}}(v : {{string}}) {","	this._{{value}} = v;","}",""].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",10)},{type:"snippet",label:"ref",codeSnippet:['/// <reference path="{{_}}" />',"{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",11)},{type:"snippet",label:"ret0",codeSnippet:["return false;{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",12)},{type:"snippet",label:"ret1",codeSnippet:["return true;{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",13)},{type:"snippet",label:"ret",codeSnippet:["return {{_}};{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",14)},{type:"snippet",label:"set",codeSnippet:["","public set {{value}}(v : {{string}}) {","	this.{{_}} = v;","}",""].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",15)},{type:"snippet",label:"throw",codeSnippet:['throw "{{_}}";',"{{}}"].join("\n"),documentationLabel:n.localize("vs_languages_typescript_features_typescriptSnippets",16)}]}),define("vs/languages/typescript/features/wordSuggestions",["require","exports","vs/languages/typescript/lib/typescriptServices","vs/base/collections"],function(e,t,n,r){function o(e,t,o){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a={};if(o&&r.forEach(e.identifiers,function(e){return a[e.value]=!0}),t)for(var l=n.createScanner(n.ScriptTarget.ES5,!1,e.getFullText()),c=l.scan();c!==n.SyntaxKind.EndOfFileToken;){switch(c){case n.SyntaxKind.SingleLineCommentTrivia:case n.SyntaxKind.MultiLineCommentTrivia:var u=l.getTokenText(),d=u.split(/[^\w]/);d.forEach(function(e){return a[e]=!0})}c=l.scan()}return i.push(""),i.forEach(function(e){return delete a[e]}),r.keys(a)}return o}),define("vs/languages/typescript/features/suggestions",["require","exports","vs/base/collections","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter","vs/languages/typescript/features/previewer","vs/languages/lib/javascriptSnippets","vs/languages/typescript/features/typescriptSnippets","vs/languages/typescript/features/wordSuggestions"],function(e,t,n,r,o,i,s,a,l){function c(e,t){for(var n=t;t>0&&/\w|\$/.test(e.charAt(t-1));)t-=1;return e.substring(t,n)}function u(e){return e.type+e.label+e.codeSnippet}function d(e,t,r,i){var d=t.toString(),p=e.getSourceFile(d),m=o.getOffset(p,r),f=e.getCompletionsAtPosition(d,m),g=n.createStringDictionary();if(f)for(var v=0,b=f.entries.length;b>v;v++){var y=f.entries[v];n.insert(g,{label:y.name,codeSnippet:y.name,type:h(y.kind)},u)}if(!f||!f.isMemberCompletion){for(var v=0,b=s.snippets.length;b>v;v++)n.insert(g,s.snippets[v],u);for(var v=0,b=a.snippets.length;b>v;v++)n.insert(g,a.snippets[v],u)}var _=c(p.getFullText(),m);return i.alwaysAllWords&&l(p,!1,!0,_).every(function(e){return n.insert(g,{label:e,codeSnippet:e,type:"text"},u),!0}),{currentWord:_,suggestions:n.values(g)}}function p(e,t,n,r,s){if("snippet"===r.type)return r;var a=t.toString(),l=e.getSourceFile(a),c=o.getOffset(l,n),u=e.getCompletionEntryDetails(a,c,r.label);if(!u)return r;if(r.documentationLabel=i.plain(u.documentation),r.typeLabel=i.plain(u.displayParts),r.codeSnippet=u.name,s.useCodeSnippetsOnMethodSuggest&&"function"===h(u.kind)){var d,p=u.name;d=u.displayParts.filter(function(e){return"parameterName"===e.kind}).map(function(e){return"{{"+e.text+"}}"}),p+=d.length>0?"("+d.join(", ")+"){{}}":"()",r.codeSnippet=p}return r}function h(e){switch(e){case r.ScriptElementKind.primitiveType:case r.ScriptElementKind.keyword:return"keyword";case r.ScriptElementKind.variableElement:case r.ScriptElementKind.localVariableElement:case r.ScriptElementKind.memberVariableElement:case r.ScriptElementKind.memberGetAccessorElement:case r.ScriptElementKind.memberSetAccessorElement:return"field";case r.ScriptElementKind.functionElement:case r.ScriptElementKind.memberFunctionElement:case r.ScriptElementKind.constructSignatureElement:case r.ScriptElementKind.callSignatureElement:return"function"}return e}t.computeSuggestions=d,t.getSuggestionDetails=p}),define("vs/languages/typescript/features/quickFix",["require","exports","vs/base/network","vs/base/strings","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter","vs/nls!vs/languages/typescript/typescriptWorker2","vs/base/arrays"],function(e,t,n,r,o,i,s,a){function l(e,t,n,s){var a=t.toString(),l=e.getSourceFile(a),c=i.getOffset(l,{lineNumber:n.endLineNumber,column:n.endColumn}),u=o.findTokenOnLeftOfPosition(l,c);if(!u||0===u.getWidth())return null;var d=JSON.parse(s);switch(d.type){case"rename":var p=l.getLineAndCharacterFromPosition(u.getStart()),h=l.getLineAndCharacterFromPosition(u.getEnd()),m={startLineNumber:p.line,startColumn:p.character,endLineNumber:h.line,endColumn:h.character};return{editOperations:[{range:m,text:d.name}]};case"addglobal":var f=r.format("/* global {0} */\n",d.name),m={startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1};return{editOperations:[{range:m,text:f}]}}return null}function c(e){return!!e.code}function u(e,t,n){if(!c(n))return[];var r=n,o=0;try{o=parseInt(r.code)}catch(i){}var s=[];switch(o){case 2339:d(e,t,r,s);break;case 2304:d(e,t,r,s),p(e,t,r,s)}return s}function d(e,t,n,l){var c=t.toString(),u=e.getSourceFile(c),d=i.getOffset(u,{lineNumber:n.endLineNumber,column:n.endColumn}),p=o.findTokenOnLeftOfPosition(u,d);if(p&&0!==p.getWidth()){var h=o.getTextOfNode(p);h=h.substring(0,h.length-(p.getEnd()-d));var m=e.getCompletionsAtPosition(c,d);if(m&&!a.isFalsyOrEmpty(m.entries)){var f=[];m.entries.forEach(function(e){if(e.name!==h)switch(e.kind){case o.ScriptElementKind.classElement:case o.ScriptElementKind.interfaceElement:case o.ScriptElementKind.typeElement:case o.ScriptElementKind.enumElement:case o.ScriptElementKind.variableElement:case o.ScriptElementKind.localVariableElement:case o.ScriptElementKind.functionElement:case o.ScriptElementKind.localFunctionElement:case o.ScriptElementKind.memberFunctionElement:case o.ScriptElementKind.memberGetAccessorElement:case o.ScriptElementKind.memberSetAccessorElement:case o.ScriptElementKind.memberVariableElement:case o.ScriptElementKind.constructorImplementationElement:case o.ScriptElementKind.callSignatureElement:case o.ScriptElementKind.indexSignatureElement:case o.ScriptElementKind.constructSignatureElement:case o.ScriptElementKind.parameterElement:case o.ScriptElementKind.primitiveType:var t=r.difference(h,e.name);
if(t<h.length/2)return;f.push({label:s.localize("vs_languages_typescript_features_quickFix",0,e.name),id:JSON.stringify({type:"rename",name:e.name}),score:t})}}),f.sort(function(e,t){return t.score-e.score});for(var g=Math.min(3,f.length),v=0;g>v;v++)l.push(f[v])}}}function p(e,t,a,l){var c=t.toString(),u=e.getSourceFile(c),d=i.getOffset(u,{lineNumber:a.endLineNumber,column:a.endColumn}),p=o.findTokenOnLeftOfPosition(u,d);if(p&&0!==p.getWidth()){var h=o.getTextOfNode(p),m=P[h];if(m&&n.schemas.inMemory!==t.getScheme()){var f=Array.isArray(m)?m:[m];f.forEach(function(e){l.push({label:s.localize("vs_languages_typescript_features_quickFix",1,e),id:JSON.stringify({type:"addtripleslash",name:e}),score:1})})}r.endsWith(t.path,".js")&&l.push({label:s.localize("vs_languages_typescript_features_quickFix",2,h),id:JSON.stringify({type:"addglobal",name:h}),score:1})}}t.evaluate=l,t.compute=u;var h="angularjs/angular.d.ts",m="jquery/jquery.d.ts",f="node/node.d.ts",g="mocha/mocha.d.ts",v="underscore/underscore.d.ts",b="knockout/knockout.d.ts",y="backbone/backbone.d.ts",_="d3/d3.d.ts",w="qunit/qunit.d.ts",T="react/react.d.ts",E="ember/ember.d.ts",S="lodash/lodash.d.ts",k="mustache/mustache.d.ts",C="async/async.d.ts",x="browserify/browserify.d.ts",L="cordova/cordova.d.ts",A="gruntjs/gruntjs.d.ts",N="gulp/gulp.d.ts",b="knockout/knockout.d.ts",I="sinon/sinon.d.ts",M="jasmine/jasmine.d.ts",P={angular:h,$:m,jquery:m,jQuery:m,process:f,__dirname:f,describe:[g,M],it:[g,M],_:[v,S],ko:b,Backbone:y,d3:_,QUnit:w,React:T,Ember:E,Mustache:k,async:C,browserify:x,cordova:L,grunt:A,gulp:N,sinon:I}}),define("vs/languages/typescript/lint/rules/layout",["require","exports","vs/base/strings","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,r){var o=function(){function e(){this.code="SA1503",this.name="CurlyBracketsMustNotBeOmitted",this.filter=[r.SyntaxKind.IfStatement,r.SyntaxKind.ElseKeyword,r.SyntaxKind.DoStatement,r.SyntaxKind.ForInStatement,r.SyntaxKind.ForStatement,r.SyntaxKind.WhileStatement]}return e.prototype.checkNode=function(e,t){if(e.kind===r.SyntaxKind.IfStatement){var n=e;if(n.elseStatement&&n.elseStatement.kind===r.SyntaxKind.IfStatement)return;n.thenStatement&&n.thenStatement.kind!==r.SyntaxKind.Block&&t.reportError(n.thenStatement,this.name,this.code),n.elseStatement&&n.elseStatement.kind!==r.SyntaxKind.Block&&t.reportError(n.elseStatement,this.name,this.code)}else{var o=e;o.statement&&o.statement.kind!==r.SyntaxKind.Block&&t.reportError(o.statement,this.name,this.code)}},e}();t.CurlyBracketsMustNotBeOmitted=o;var i=function(){function e(){this.code="SA1514",this.name="EmptyBlocksWithoutComment",this.filter=[r.SyntaxKind.Block]}return e.prototype.checkNode=function(e,t){e.statements.pos<e.statements.end||r.getTextOfNode(e).match(/\/\/|\/|\*/)||t.reportError(e,this.name,this.code)},e.prototype._hasComment=function(e){var t=e.getChildAt(1);if(t){var o=r.getTextOfNode(t);if(o&&n.trimWhitespace(o).length>0)return!0}return!1},e}();t.EmptyBlocksWithoutComment=i}),define("vs/languages/typescript/lint/rules/typescript",["require","exports","vs/base/strings","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,r){var o=function(){function e(){this.code="SA9002",this.name="FunctionsWithoutReturnType",this.filter=[r.SyntaxKind.FunctionDeclaration,r.SyntaxKind.Method,r.SyntaxKind.ArrowFunction]}return e.prototype.checkNode=function(e,t){e.type||t.reportError(e.name,this.name,this.code)},e}();t.FunctionsWithoutReturnType=o;var i=function(){function e(){this.code="SA9056",this.name="TripleSlashReferenceAlike",this.filter=[r.SyntaxKind.SourceFile]}return e.prototype.checkNode=function(e,t){var n=e.getLeadingTriviaWidth(),r=e.getFullText().substr(0,n);this._couldMeanTripleSlash(r)&&t.reportError(e,this.name,this.code,0,n)},e.prototype._couldMeanTripleSlash=function(t){if(e._TripleSlashReference.test(t))return!1;var r=t.split(/[\s=]/);if(!(r.length>5)){for(var o=0,i=0,s=0,a=0,l=r.length;l>a;a++)o=Math.max(o,n.difference("reference",r[a])),i=Math.max(i,n.difference("path",r[a])),s=Math.max(s,(n.startsWith(r[a],'"')||n.startsWith(r[a],"'")?1:0)+(n.endsWith(r[a],'"')||n.endsWith(r[a],"'")?1:0));return(s>0||i>5)&&o>5?!0:!1}},e._TripleSlashReference=/^(\/\/\/\s*<reference\s+path=)('|")(.+?)\2\s*(static=('|")(.+?)\2\s*)*/im,e}();t.TripleSlashReferenceAlike=i;var s=function(){function e(){this.code="SA9057",this.name="UnusedImports",this.filter=[r.SyntaxKind.ImportDeclaration]}return e.prototype.checkNode=function(e,t){var n=r.getTokenPosOfNode(e.name),o=t.languageService().getOccurrencesAtPosition(t.filename(),n);o&&1===o.length&&t.reportError(e,this.name,this.code,r.getTokenPosOfNode(e))},e}();t.UnusedImports=s;var a=function(){function e(){this.code="SA9058",this.name="UnusedVariables",this.filter=[r.SyntaxKind.VariableStatement]}return e.prototype.checkNode=function(e,t){var n=this;if(!(e.flags&r.NodeFlags.Export)&&e.parent.kind!==r.SyntaxKind.SourceFile){for(var o,i,s=e.parent;s&&!o;){switch(s.kind){case r.SyntaxKind.Constructor:case r.SyntaxKind.Method:case r.SyntaxKind.FunctionDeclaration:case r.SyntaxKind.FunctionExpression:case r.SyntaxKind.GetAccessor:case r.SyntaxKind.SetAccessor:o=s.body}s=s.parent}var a;if(o){var i=o.getFullText(),l=o.getFullStart();a=function(e){for(var n=0,r=0;2>n&&(r=i.indexOf(e.name.text,r),-1!==r);){r+=e.name.text.length;var o=t.languageService().getDefinitionAtPosition(t.filename(),l+r);o&&o.length>0&&o[0].textSpan.containsPosition(e.name.getStart())&&(n+=1)}return n>1}}else a=function(e){var n,o=r.getTokenPosOfNode(e.name);return n=t.languageService().getOccurrencesAtPosition(t.filename(),o),n.length>1};e.declarations.forEach(function(e){a(e)||t.reportError(e.name,n.name,n.code)})}},e}();t.UnusedVariables=a;var l=function(){function e(){this.code="SA9059",this.name="UnusedFunctions",this.filter=[r.SyntaxKind.FunctionDeclaration]}return e.prototype.checkNode=function(e,t){if(!(e.flags&r.NodeFlags.Export||e.flags&r.NodeFlags.DeclarationFile)){var n=r.getTokenPosOfNode(e.name),o=t.languageService().getOccurrencesAtPosition(t.filename(),n);o&&o.length<=1&&t.reportError(e.name,this.name,this.code,n)}},e}();t.UnusedFunctions=l;var c=function(){function e(){this.code="SA9060",this.name="UnusedMembers",this.filter=[r.SyntaxKind.Property,r.SyntaxKind.Method]}return e.prototype.checkNode=function(e,t){if(e.flags&r.NodeFlags.Private&&e.name){var n=r.getTokenPosOfNode(e.name),o=t.languageService().getOccurrencesAtPosition(t.filename(),n);o&&o.length<=1&&t.reportError(e.name,this.name,this.code,n)}},e}();t.UnusedMembers=c}),define("vs/languages/typescript/lint/rules/javascript",["require","exports","vs/base/strings","vs/base/collections","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,r,o){function i(e,t){var n=[],r=function(e){e&&n.push(e)};e.getChildren().forEach(r);do e=n.shift(),e&&(t(e),e.getChildren().forEach(r));while(n.length>0)}var s=function(){function e(){this.code="SA9005",this.name="ComparisonOperatorsNotStrict",this.filter=[o.SyntaxKind.BinaryExpression]}return e.prototype.checkNode=function(e,t){if(e.operator===o.SyntaxKind.EqualsEqualsToken||e.operator===o.SyntaxKind.ExclamationEqualsToken){var n=e.right.pos-2;t.reportError(e,this.name,this.code,n,2)}},e}();t.ComparisonOperatorsNotStrict=s;var a=function(){function e(){this.code="SA9050",this.name="MissingSemicolon",this.filter=[o.SyntaxKind.VariableStatement,o.SyntaxKind.ExpressionStatement,o.SyntaxKind.ReturnStatement,o.SyntaxKind.Property]}return e.prototype.checkNode=function(e,t){var n=o.findChildOfKind(e,o.SyntaxKind.SemicolonToken);if(!n){var r=o.getTokenPosOfNode(e)+e.getWidth()-1;t.reportError(e,this.name,this.code,r,1)}},e}();t.MissingSemicolon=a;var l=r.createNumberDictionary();l[o.SyntaxKind.ClassKeyword]=!0,l[o.SyntaxKind.ConstKeyword]=!0,l[o.SyntaxKind.EnumKeyword]=!0,l[o.SyntaxKind.ExportKeyword]=!0,l[o.SyntaxKind.ExtendsKeyword]=!0,l[o.SyntaxKind.ImportKeyword]=!0,l[o.SyntaxKind.SuperKeyword]=!0;var c=function(){function e(){this.code="SA9051",this.name="ReservedKeywords",this.filter=[o.SyntaxKind.SourceFile]}return e.prototype.checkNode=function(e,t){var n=this;i(e,function(e){r.contains(l,e.kind)&&t.reportError(e,n.name,n.code)})},e}();t.ReservedKeywords=c;var u=r.createNumberDictionary();u[o.SyntaxKind.ImplementsKeyword]=!0,u[o.SyntaxKind.InterfaceKeyword]=!0,u[o.SyntaxKind.LetKeyword]=!0,u[o.SyntaxKind.PackageKeyword]=!0,u[o.SyntaxKind.PrivateKeyword]=!0,u[o.SyntaxKind.ProtectedKeyword]=!0,u[o.SyntaxKind.PublicKeyword]=!0,u[o.SyntaxKind.StaticKeyword]=!0,u[o.SyntaxKind.YieldKeyword]=!0,u[o.SyntaxKind.NumberKeyword]=!0,u[o.SyntaxKind.DeclareKeyword]=!0,u[o.SyntaxKind.StringKeyword]=!0,u[o.SyntaxKind.BooleanKeyword]=!0;var d=function(){function e(){this.code="SA9052",this.name="TypeScriptSpecifics",this.filter=[o.SyntaxKind.SourceFile]}return e.prototype.checkNode=function(e,t){var n=this;i(e,function(e){(r.contains(l,e.kind)||r.contains(u,e.kind))&&t.reportError(e,n.name,n.code)})},e}();t.TypeScriptSpecifics=d;var p=function(){function e(){this.code="SA9053",this.filter=[o.SyntaxKind.BinaryExpression],this.name="UnknownTypeOfResults"}return e.prototype.checkNode=function(t,i){if(t.left&&t.left.kind===o.SyntaxKind.TypeOfExpression){var s=!1;if(t.right.kind===o.SyntaxKind.StringLiteral){var a=o.getTextOfNode(t.right);a=n.trim(a,"'"),a=n.trim(a,'"'),s=!r.contains(e._AllowedStrings,a)}else t.right.kind===o.SyntaxKind.NullKeyword?s=!0:"undefined"===o.getTextOfNode(t.right)&&(s=!0);s&&i.reportError(t,this.name,this.code)}},e._AllowedStrings={undefined:!0,object:!0,function:!0,boolean:!0,number:!0,string:!0},e}();t.UnknownTypeOfResults=p;var h=function(){function e(){this.code="SA9054",this.name="SemicolonsInsteadOfBlocks",this.filter=[o.SyntaxKind.IfStatement,o.SyntaxKind.ElseKeyword,o.SyntaxKind.WhileStatement,o.SyntaxKind.ForStatement,o.SyntaxKind.ForInStatement]}return e.prototype.checkNode=function(e,t){if(e.kind===o.SyntaxKind.IfStatement){var n=e;(n.thenStatement&&n.thenStatement.kind===o.SyntaxKind.EmptyStatement||n.elseStatement&&n.elseStatement.kind===o.SyntaxKind.EmptyStatement)&&t.reportError(n,this.name,this.code)}var r=e;r&&r.statement&&r.statement.kind===o.SyntaxKind.EmptyStatement&&t.reportError(r,this.name,this.code)},e}();t.SemicolonsInsteadOfBlocks=h;var m=function(){function e(){this.code="SA9055",this.name="FunctionsInsideLoops",this.filter=[o.SyntaxKind.FunctionExpression,o.SyntaxKind.FunctionDeclaration,o.SyntaxKind.ArrowFunction]}return e.prototype.checkNode=function(e,t){for(var n=e.parent;n;){if(n.kind===o.SyntaxKind.ForStatement||n.kind===o.SyntaxKind.ForInStatement||n.kind===o.SyntaxKind.WhileStatement||n.kind===o.SyntaxKind.DoStatement){t.reportError(e,this.name,this.code);break}n=n.parent}},e}();t.FunctionsInsideLoops=m;var f=function(){function e(){this.code="SA9062",this.name="NewOnLowercaseFunctions",this.filter=[o.SyntaxKind.NewExpression]}return e.prototype.checkNode=function(e,t){var n=e.expression;n.kind===o.SyntaxKind.PropertyAccessExpression&&(n=n.name);var r=o.getTextOfNode(n);r&&!r.charAt(0).match(/[A-Z_]/)&&t.reportError(n,this.name,this.code)},e}();t.NewOnLowercaseFunctions=f});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/lint/lint",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2","vs/base/severity","vs/base/types","vs/base/collections","vs/languages/typescript/lib/typescriptServices","./rules/layout","./rules/typescript","./rules/javascript"],function(e,t,n,r,o,i,s,a,l,c){function u(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"function"==typeof r&&(t[String(n).toLowerCase()]=r)}}function d(e){var t={},n=[];u(a,t),u(c,t),u(l,t);for(var s in e)if(e.hasOwnProperty(s)){var d=i.lookup(t,String(s).toLowerCase());d&&n.push({rule:o.create(d),severity:r.fromValue(e[s])})}return n}function p(e,t,n){var r=d(e),o=new f(t,r);return o.check(t.getSourceFile(n.toString()))}var h=function(){function e(e){this._rules={},this._errors=[];for(var t=0,n=e.length;n>t;t++)this._addRule(e[t])}return e.prototype._addRule=function(e){var t=this,n=function(n){i.lookupOrInsert(t._rules,n,[]).push(e)};e.rule.filter?e.rule.filter.forEach(n):n(-1)},e.prototype.check=function(e){return this._errors.length=0,this._currentSeverity=r.Warning,this._sourceFile=e,this._visit(e),this._errors.slice(0)},e.prototype.reportError=function(e,t,n,r,o){if(e){"undefined"==typeof r&&(r=s.getTokenPosOfNode(e)),"undefined"==typeof o&&(o=e.getWidth());var i=this._sourceFile.getLineAndCharacterFromPosition(r),a=this._sourceFile.getLineAndCharacterFromPosition(r+o);this._errors.push({message:t,code:n,severity:this._currentSeverity,range:{startLineNumber:i.line,startColumn:i.character,endLineNumber:a.line,endColumn:a.character}})}},e.prototype._visit=function(e){var t=this;e&&(this._checkNodeOrToken(e),s.forEachChild(e,function(e){t._visit(e)}))},e.prototype._checkNodeOrToken=function(e){for(var t=i.lookup(this._rules,e.kind,[]).concat(i.lookup(this._rules,-1,[])),n=0,o=t.length;o>n;n++)if(this._currentSeverity=t[n].severity,this._currentSeverity!==r.Ignore)try{t[n].rule.checkNode(e,this)}catch(s){console.error(s)}},e}();t.SimpleStyleRuleChecker=h;var m=function(e){function t(t,n){e.call(this,n),this._languageService=t}return __extends(t,e),t.prototype.languageService=function(){return this._languageService},t.prototype.filename=function(){return this._filename},t.prototype.check=function(t){return this._filename=t.filename,e.prototype.check.call(this,t)},t}(h);t.LanuageServiceStyleRuleChecker=m;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.reportError=function(t,n,r,o,i){return e.prototype.reportError.call(this,t,this._lookupMessage(n,r),r,o,i)},t.prototype._lookupMessage=function(e,t){switch(t){case"SA1503":return n.localize("vs_languages_typescript_lint_lint",0);case"SA1514":return n.localize("vs_languages_typescript_lint_lint",1);case"SA9005":return n.localize("vs_languages_typescript_lint_lint",2);case"SA9050":return n.localize("vs_languages_typescript_lint_lint",3);case"SA9051":return n.localize("vs_languages_typescript_lint_lint",4);case"SA9052":return n.localize("vs_languages_typescript_lint_lint",5);case"SA9053":return n.localize("vs_languages_typescript_lint_lint",6);case"SA9054":return n.localize("vs_languages_typescript_lint_lint",7);case"SA9055":return n.localize("vs_languages_typescript_lint_lint",8);case"SA9062":return n.localize("vs_languages_typescript_lint_lint",9);case"SA9002":return n.localize("vs_languages_typescript_lint_lint",10);case"SA9056":return n.localize("vs_languages_typescript_lint_lint",11);case"SA9057":return n.localize("vs_languages_typescript_lint_lint",12);case"SA9058":return n.localize("vs_languages_typescript_lint_lint",13);case"SA9059":return n.localize("vs_languages_typescript_lint_lint",14);case"SA9060":return n.localize("vs_languages_typescript_lint_lint",15);case"SA9061":return n.localize("vs_languages_typescript_lint_lint",16)}return e},t}(m);t.StyleRuleCheckerWithMessages=f,t.check=p}),define("vs/languages/typescript/features/diagnostics",["require","exports","vs/base/severity","vs/languages/typescript/features/converter","vs/languages/typescript/lint/lint"],function(e,t,n,r,o){function i(e,t,n){if(!n.syntaxValidation)return[];var r=t.toString(),o=e.getSyntacticDiagnostics(r);return o=o.filter(function(e){return 6053!==e.code&&1148!==e.code}),l(e.getSourceFile(r),o,n)}function s(e,t,n){if(!n.semanticValidation)return[];var r=t.toString(),o=e.getSemanticDiagnostics(r);return l(e.getSourceFile(r),o,n)}function a(e,t,n){return n.semanticValidation?o.check(n.lint,e,t).map(function(e){return{message:e.message,severity:e.severity,startLineNumber:e.range.startLineNumber,startColumn:e.range.startColumn,endLineNumber:e.range.endLineNumber,endColumn:e.range.endColumn}}):[]}function l(e,t,o){for(var i=[],s=0;s<t.length;s++){var a=t[s],l=n.Error;if(o.diagnosticClassifier&&(l=o.diagnosticClassifier(a)),l){var c=r.getRange(e,a.start,a.start+a.length);i.push({message:a.messageText,code:String(a.code),severity:l,startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn})}}return i}t.getSyntacticDiagnostics=i,t.getSemanticDiagnostics=s,t.getExtraDiagnostics=a}),define("vs/languages/typescript/features/navigation",["require","exports","vs/languages/typescript/features/converter","vs/base/uri"],function(e,t,n,r){function o(e,t){var o=[];return e.forEach(function(e){var i=e.syntaxLanguageService();i.getNavigateToItems(t).forEach(function(e){o.push({containerName:e.containerName,name:e.name,parameters:"method"===e.kind||"function"===e.kind?"()":"",type:e.kind,resourceUri:r.parse(e.fileName),range:n.getRange(i.getSourceFile(e.fileName),e.textSpan.start(),e.textSpan.end())})})}),o}t.getNavigateToItems=o}),define("vs/languages/typescript/features/emitting",["require","exports","vs/base/strings"],function(e,t,n){function r(e,t,r){var o=e.getEmitOutput(t.toString()),i=o.outputFiles;if(!i)return null;for(var s=0,a=i.length;a>s;s++)if(n.endsWith(i[s].name,r))return{filename:i[s].name,content:i[s].text};return null}t.getEmitOutput=r}),define("vs/languages/typescript/features/rename",["require","exports","vs/languages/typescript/features/converter"],function(e,t,n){function r(e,t,r,o){var i,s,a=e.semanticLanguageService(),l=t.toString(),c=a.getSourceFile(l),u=n.getOffset(c,r);return i=a.getRenameInfo(l,u),s={currentName:i.displayName,edits:[]},i.canRename?(s.edits=a.findRenameLocations(l,u,!1,!1).filter(function(t){return!e.dependencyResolver().isExtraLib(t.fileName)}).map(function(e){return{resource:e.fileName,newText:o,range:n.getRange(a.getSourceFile(e.fileName),e.textSpan.start(),e.textSpan.end())}}),s):(s.rejectReason=i.localizedErrorMessage,s)}return r});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/typescriptWorker2",["require","exports","vs/base/lib/winjs.base","vs/base/arrays","vs/base/network","vs/base/strings","vs/base/uuid","vs/base/trie","vs/base/errors","vs/base/collections","vs/base/lifecycle","vs/editor/worker/modesWorker","vs/editor/core/model/mirrorModel","vs/platform/services","vs/languages/typescript/typescript.configuration","vs/languages/typescript/features/validationStrategy","vs/languages/typescript/project/project","vs/languages/typescript/typescript","vs/base/db/indexeddb","vs/base/paths","vs/languages/typescript/project/typescriptProject","vs/languages/typescript/project/projectResolver","vs/languages/typescript/features/moduleLinks","vs/languages/typescript/features/format","vs/languages/typescript/features/logicalSelection","vs/languages/typescript/features/extraInfo","vs/languages/typescript/features/outline","vs/languages/typescript/features/occurrences","vs/languages/typescript/features/definitions","vs/languages/typescript/features/codelens","vs/languages/typescript/features/references","vs/languages/typescript/features/parameterHints","vs/languages/typescript/features/suggestions","vs/languages/typescript/features/quickFix","vs/languages/typescript/features/diagnostics","vs/languages/typescript/features/navigation","vs/languages/typescript/features/emitting","vs/editor/modes/supports","vs/languages/typescript/features/rename"],function(e,t,n,r,o,i,s,a,l,c,u,d,p,h,m,f,g,v,b,y,_,w,T,E,S,k,C,x,L,A,N,I,M,P,O,R,D,V,F){var H=function(){function e(e,t){this._resourceService=e.resourceService,this._filter=t,this._basepath=e.requestService.getRequestUrl("root",i.empty,!0),this._contextService=e.contextService}return e.prototype.resolve=function(e){var t=o.URL.fromValue(y.join(this._basepath,e)),r=this._resourceService.get(t);if(!(r instanceof p.AbstractMirrorModel&&this._filter(r)))return n.TPromise.as(null);var i=r;return n.TPromise.as({resource:this._contextService.toResource(e),value:i.getValue(),path:e})},e.prototype.accept=function(e){var t=this,r=null;return new n.TPromise(function(n,o){t._resourceService.all().every(function(n){if(r)return o(r),!1;if(!(n instanceof p.AbstractMirrorModel))return!0;var s=n;return t._basepath&&i.startsWith(s.getAssociatedResource().toString(),t._basepath)?t._filter(n)?(e({resource:s.getAssociatedResource(),value:s.getValue(),path:s.getAssociatedResource().toString().substring(t._basepath.length),name:void 0,mtime:void 0,etag:void 0,mime:void 0}),!0):!0:!0}),n(null)},function(){r=l.canceled()})},e}(),B=function(e){function t(t,n,r){var o=this;e.call(this,t,n,r),this._callOnDispose=[],this._disposables=[],this._contents=Object.create(null),this._instantiationService=t.instantiationService,this._telemetryService=t.telemetryService,this._requestService=t.requestService,this._uuid=s.v4().asHex(),this._validationStrategy=this._instantiationService.createInstance(f.ValidationStrategy,this._validate.bind(this)),this._disposables.push(this._validationStrategy),this._eventService=t.eventService,this._callOnDispose.push(this.resourceService.addListener(h.ResourceEvents.ADDED,function(e){return o._onResourceAddedOrRemoved(e.url)})),this._callOnDispose.push(this.resourceService.addListener(h.ResourceEvents.REMOVED,function(e){return o._onResourceAddedOrRemoved(e.url)})),this.configure(null)}return __extends(t,e),t.prototype._createInPlaceReplaceSupport=function(){return new V.InplaceReplaceSupport(this.resourceService,this)},t.prototype.dispose=function(){this._callOnDispose=u.cAll(this._callOnDispose),this._disposables=u.disposeAll(this._disposables)},t.prototype._doConfigure=function(e){var t=this,o=this._options,s=m.sanitize(e,m._internalDefaultValidationSettings,m.defaultSuggestSettings);if(o){var l={};o.validate.forEach(function(e){return l[e.scope]=e.extraLibs}),s.validate.forEach(function(e){return e.extraLibs=r.merge([e.extraLibs,c.lookup(l,e.scope,[])],function(e){return e})})}if(this._options&&m.equal(this._options,s))return n.TPromise.as(!1);this._projects&&u.disposeAll(this._projects.values()),this._projects=a.newTrie(),this._options=s;var d=r.coalesce([this._requestService.getRequestUrl("root",i.empty,!0),"inmemory://model/"]),p=[this._instantiationService.createInstance(H,this._isMirrorModelAndMyMode.bind(this)),this];b.canBeUsed()&&p.push(this._instantiationService.createInstance(w.DatabaseContentResolver,this._getMode().getId()));var h=new g.CompositeContentResolver(p);return d.forEach(function(e){t._options.validate.forEach(function(n){var r,o=y.join(e,n.scope);r=function(e){if(!t._isMirrorModelAndMyMode(e))return!1;var n=t.findProject(e.getAssociatedResource()).root();return o===n},t._projects.insert(o,t._createProject(o,h,r,n,t._options.suggest))})}),this._projects.insert(i.empty,this._createProject(i.empty,h,this._isMirrorModelAndMyMode.bind(this),m._internalDefaultValidationSettings,this._options.suggest)),n.TPromise.as(!0)},t.prototype._isMirrorModelAndMyMode=function(e){return e instanceof p.AbstractMirrorModel?e.getModeId()!==this._getMode().getId()?!1:!0:!1},t.prototype._createProject=function(e,t,n,r,o){return this._instantiationService.createInstance(_.TypeScriptProject,this._getMode(),e,n,t,r,o)},t.prototype.findProject=function(e){var t=this._projects.lookUp(e.toString(),!0);if(t)return t.element;throw l.illegalState("no project found for: "+e.toString())},t.prototype.getProjects=function(){return this._projects.values().filter(function(e){return e.root()!==i.empty})},t.prototype.resolveDependenciesAndRun=function(e,t){var n=this.findProject(e);return n.dependencyResolver().resolve(e,n.semanticLanguageService().host).then(function(){try{return t(n)}catch(e){throw e}})},t.prototype.acceptProjectDelta=function(e){var t=this,n=e.hasChanges;r.isFalsyOrEmpty(e.added)||(e.added.forEach(function(e){return t._contents[e.path]=e}),n=!0),r.isFalsyOrEmpty(e.removed)||e.removed.forEach(function(e){e[0]!==y.sep&&(e=y.sep+e),Object.keys(t._contents).forEach(function(n){y.isEqualOrParent(n,e)&&delete t._contents[n]});var r=t._requestService.getRequestUrl("root","",!0);t.getProjects().forEach(function(t){var o=t.semanticLanguageService().host;n=o.getScriptFileNames().filter(function(t){return y.isEqualOrParent(t,y.join(r,e))}).map(function(e){return o.removeScriptSnapshot(e)}).reduce(function(e,t){return e||t},!1)||n})}),n&&(this._eventService.emit(v.Events.ResourceSetChanged),this._validationHelper.trigger())},t.prototype.resolve=function(e){return e[0]!==y.sep&&(e=y.sep+e),n.TPromise.as(this._contents[e])},t.prototype.accept=function(e){var t=this,r=null;return new n.TPromise(function(n,o){c.forEach(t._contents,function(t){e(t.value)}),r?o(r):n(null)},function(){r=l.canceled()})},t.prototype.doValidateOnChange=function(e,t,n){for(var r=0;r<e.length;r++){var o=this.resourceService.get(e[r]);this._validationStrategy.scheduleValidation(f.ValidationReason.ItChanged,o)}for(var r=0;r<t.length;r++){var o=this.resourceService.get(t[r]),i=f.ValidationReason.SomeChanged;n&&(i=f.ValidationReason.ItChanged),this._validationStrategy.scheduleValidation(i,o)}},t.prototype._onResourceAddedOrRemoved=function(e){var t=this.resourceService.get(e);this._shouldIncludeModelInValidation(t)&&(this._eventService.emit(v.Events.ResourceSetChanged),this._validationHelper.trigger())},t.prototype._validate=function(e,t,r){var o=this;if(t===f.ValidationType.Syntax){var i=this.findProject(e),s=O.getSyntacticDiagnostics(i.syntaxLanguageService(),e,i.compileConfiguration()),a=this._publishMarkersForResource(e,t,s);return n.TPromise.as(a)}return t===f.ValidationType.Semantic?this.resolveDependenciesAndRun(e,function(n){var i,s=n.semanticLanguageService(),a=n.compileConfiguration();i=O.getSemanticDiagnostics(s,e,a),r===f.ValidationReason.ItChanged&&i.push.apply(i,O.getExtraDiagnostics(s,e,a)),o._publishMarkersForResource(e,t,i)}):n.TPromise.as(null)},t.prototype._publishMarkersForResource=function(e,t,n){var r=i.format("{0}/{1}",this._uuid,t);return this.markerService.changeOne(r,e,n),n.length>0},t.prototype._getContextForValidationParticipants=function(e){var t=this.findProject(e).syntaxLanguageService(),n=t.host.getScriptFileNames(),r=e.toString();return n.indexOf(r)<0?null:this.findProject(e).syntaxLanguageService().getSourceFile(r)},t.prototype.doSuggest=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return M.computeSuggestions(n.semanticLanguageService(),e,t,n.suggestConfiguration())})},t.prototype._getSuggestContext=function(e){var t=this.findProject(e);return n.TPromise.as({syntaxTree:t.syntaxLanguageService().getSourceFile(e.toString()),compilationSettings:t.compileConfiguration(),project:t})},t.prototype.getSuggestionDetails=function(e,t,n){return this.resolveDependenciesAndRun(e,function(r){return M.getSuggestionDetails(r.semanticLanguageService(),e,t,n,r.suggestConfiguration())})},t.prototype.runQuickFixAction=function(e,t,n){return this.resolveDependenciesAndRun(e,function(r){return P.evaluate(r.semanticLanguageService(),e,t,n)})},t.prototype.getQuickFixes=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return P.compute(n.semanticLanguageService(),e,t)})},t.prototype.getEmitOutput=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return D.getEmitOutput(n.semanticLanguageService(),e,t)})},t.prototype.getNavigateToItems=function(e){return R.getNavigateToItems(this.getProjects(),e)},t.prototype.getParameterHints=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return I.compute(n.semanticLanguageService(),e,t)})},t.prototype.findDeclaration=function(e,t){return n.TPromise.join([this._findLinkTarget(e,t),this._findTypeScriptDeclaration(e,t)]).then(function(e){return r.coalesce(e)[0]||null})},t.prototype._findLinkTarget=function(e,t){return this.resolveDependenciesAndRun(e,function(n){var r=e.toString(),o=n.syntaxLanguageService().getSourceFile(r);return T.findLink(o,r,t,n.semanticLanguageService().host,n.root())})},t.prototype.textReplace=function(e,t){var n=[["true","false"],["string","number","boolean","void","any"],["private","public"]];return V.ReplaceSupport.valueSetsReplace(n,e,t)},t.prototype.findCodeLensSymbols=function(e){return A.getCodeLensSymbols(this.findProject(e).syntaxLanguageService(),e)},t.prototype.findCodeLensReferences=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return A.findCodeLensReferences(n,e,t)}).then(function(e){return e})},t.prototype.findReferences=function(e,t,n){return this.resolveDependenciesAndRun(e,function(r){return N.find(r,e,t,n)}).then(function(e){return e})},t.prototype.computeInfo=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return k.compute(n.semanticLanguageService(),e,t)})},t.prototype.findOccurrences=function(e,t,n){return this.resolveDependenciesAndRun(e,function(r){return x.compute(r.semanticLanguageService(),e,t,n)})},t.prototype._findTypeScriptDeclaration=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return L.findDeclaration(n.semanticLanguageService(),e,t)})},t.prototype.findTypeDeclaration=function(e,t){return this.resolveDependenciesAndRun(e,function(n){return L.findTypeDeclaration(n.semanticLanguageService(),e,t)})},t.prototype.getOutline=function(e){return C.compute(this.findProject(e).syntaxLanguageService(),e)},t.prototype.formatDocument=function(e,t){return E.formatDocument(this.findProject(e).syntaxLanguageService(),e,t)},t.prototype.formatRange=function(e,t,n){return E.formatRange(this.findProject(e).syntaxLanguageService(),e,t,n)},t.prototype.formatAfterKeystroke=function(e,t,n,r){return E.formatAfterKeystroke(this.findProject(e).syntaxLanguageService(),e,t,n,r)},t.prototype.getRangesToPosition=function(e,t){return S.compute(this.findProject(e).syntaxLanguageService(),e,t)},t.prototype.rename=function(e,t,n){return this.resolveDependenciesAndRun(o.URL.fromUri(e),function(r){return F(r,e,t,n)})},t}(d.AbstractWorkerMode);t.TypeScriptWorker2=B});