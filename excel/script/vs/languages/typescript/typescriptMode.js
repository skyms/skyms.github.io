/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/base/lifecycle",["require","exports"],function(e,t){function n(e){for(var t=0,n=e.length;n>t;t++)e[t]&&e[t].dispose();return[]}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return{dispose:function(){return n(e)}}}function o(e){return{dispose:function(){return n(e)}}}function i(e){return{dispose:function(){return e()}}}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return o(e.map(i))}function a(e){if(e){if("function"==typeof e)return e(),null;if(Array.isArray(e)){for(;e.length>0;)e.pop()();return e}return null}return null}t.disposeAll=n,t.combinedDispose=r,t.combinedDispose2=o,t.fnToDisposable=i,t.toDisposable=s,t.cAll=a;var l=function(){function e(e){this._prefix=e,this._lastId=0}return e.prototype.generate=function(){return this._prefix+ ++this._lastId},e}();t.IdGenerator=l});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/base/uuid",["require","exports"],function(e,t){function n(e,t){return"function"==typeof e[t]&&0===e[t].length}function r(e){return e instanceof a||e instanceof l||n(e,"asHex",0)&&n(e,"equals",1)}function o(){return new l}function i(e){if(!c.test(e))throw new Error("invalid uuid");return new a(e)}function s(){return o().asHex()}t.isUUID=r;var a=function(){function e(e){this._value=e}return e.prototype.asHex=function(){return this._value},e.prototype.equals=function(e){return this.asHex()===e.asHex()},e}(),l=function(e){function t(){e.call(this,[t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}return __extends(t,e),t._oneOf=function(e){var t=Math.floor(e.length*Math.random());return e[t]},t._randomHex=function(){return t._oneOf(t._chars)},t._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],t._timeHighBits=["8","9","a","b"],t}(a);t.empty=new a("00000000-0000-0000-0000-000000000000"),t.v4=o;var c=/^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$/;t.parse=i,t.generateUuid=s}),define("vs/languages/typescript/features/tokenization",["require","exports","vs/base/strings","vs/base/arrays","vs/base/collections","vs/editor/modes/modes","vs/editor/modes/supports","vs/languages/vsxml/vsxml","vs/editor/modes/stream","vs/languages/typescript/lib/typescriptServices","vs/editor/modes/modesExtensions"],function(e,t,n,r,o,i,s,a,l,c,u){function d(e,t){var n=c.createClassifier({log:function(){}}),r=t===m.TypeScript?b:_,o=t===m.TypeScript?y:w;return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new g(e,null,t,f.Unknown)},tokenize:function(e,t,i,s){return p(r,o,n,t,e,i,s)}}}function p(e,t,o,a,l,u){function d(e,t,n){(0===p.tokens.length||void 0!==n||r.tail(p.tokens).type!==t)&&p.tokens.push(new s.Token(e,t,n||i.Bracket.None))}void 0===u&&(u=0);var p={tokens:[],actualStopOffset:u+l.length,endState:new g(a.getMode(),a.getStateData(),a.language,f.Unknown),modeTransitions:[{startIndex:u,mode:a.getMode()}]};if(h(a,u,l,d))return p;var b=o.getClassificationsForLine(l,f.toEndOfLineState(a.errorState),!0),y=a.language===m.TypeScript,_=0;return p.endState.errorState=f.toErrorState(b.finalLexState,l,a.errorState),b.entries.forEach(function(r){var o,s=i.Bracket.None;if(r.classification===c.TokenClass.Punctuation){var p=l.charCodeAt(_);s=v[p]||i.Bracket.None,o=e[p]||t[r.classification],d(_+u,o,s)}else r.classification===c.TokenClass.Comment?a.errorState===f.InDocMultiLineCommentTrivia||l.match(/\/\*\*.*$/)&&!l.match(/^\s*\/\//)?d(_+u,y?"comment.doc.ts":"comment.doc.js",i.Bracket.None):a.errorState===f.InMultiLineCommentTrivia||l.match(/\/\*.*$/)&&!l.match(/^\s*\/\//)?d(_+u,y?"comment.block.ts":"comment.block.js",i.Bracket.None):d(_+u,y?"comment.line.ts":"comment.line.js",i.Bracket.None):d(_+u,t[r.classification]||n.empty,void 0);_+=r.length}),p}function h(e,t,n,r){if(!n.match(T))return!1;var o,s,c=new l.LineStream(n),u=new a.VSXMLExpression(e.getMode(),e);for(c.advanceIfRegExp(T).length>0&&r(t,"comment.vs",i.Bracket.None);!c.eos();){s=c.pos();do{if(o=u.tokenize(c),null===o||void 0===o||(void 0===o.type||null===o.type)&&(void 0===o.nextState||null===o.nextState))throw new Error("Tokenizer must return a valid state");if(o.nextState&&(o.nextState.setStateData(u.getStateData()),u=o.nextState),c.pos()<=s)throw new Error}while(!o.type&&""!==o.type);r(s+t,o.type,o.bracket)}return!0}!function(e){e[e.TypeScript=0]="TypeScript",e[e.EcmaScript5=1]="EcmaScript5"}(t.Language||(t.Language={}));var m=t.Language;t.createTokenizationSupport=d;var f;!function(e){e[e.Unknown=0]="Unknown",e[e.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",e[e.InDocMultiLineCommentTrivia=2]="InDocMultiLineCommentTrivia",e[e.InSingleQuoteStringLiteral=3]="InSingleQuoteStringLiteral",e[e.InDoubleQuoteStringLiteral=4]="InDoubleQuoteStringLiteral"}(f||(f={}));var f;!function(e){function t(t){switch(t){case e.InSingleQuoteStringLiteral:return c.EndOfLineState.InSingleQuoteStringLiteral;case e.InDoubleQuoteStringLiteral:return c.EndOfLineState.InDoubleQuoteStringLiteral;case e.InMultiLineCommentTrivia:case e.InDocMultiLineCommentTrivia:return c.EndOfLineState.InMultiLineCommentTrivia}return c.EndOfLineState.Start}function n(t,n,r){switch(t){case c.EndOfLineState.Start:return e.Unknown;case c.EndOfLineState.InSingleQuoteStringLiteral:return e.InSingleQuoteStringLiteral;case c.EndOfLineState.InDoubleQuoteStringLiteral:return e.InDoubleQuoteStringLiteral;case c.EndOfLineState.InMultiLineCommentTrivia:return r===e.InDocMultiLineCommentTrivia||n.match(/\/\*\*.*$/)?e.InDocMultiLineCommentTrivia:e.InMultiLineCommentTrivia}}e.toEndOfLineState=t,e.toErrorState=n}(f||(f={}));var g=function(){function e(e,t,n,r){this._mode=e,this._state=t,this.language=n,this.errorState=r}return e.prototype.clone=function(){return new e(this._mode,u.safeStateClone(this._state),this.language,this.errorState)},e.prototype.equals=function(t){return t===this?!0:t&&t instanceof e?this.errorState!==t.errorState?!1:u.safeStateEquals(this._state,t._state):!1},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(){throw new Error},e.prototype.getStateData=function(){return this._state},e.prototype.setStateData=function(e){this._state=e},e}(),v=o.createNumberDictionary();v["(".charCodeAt(0)]=i.Bracket.Open,v[")".charCodeAt(0)]=i.Bracket.Close,v["{".charCodeAt(0)]=i.Bracket.Open,v["}".charCodeAt(0)]=i.Bracket.Close,v["[".charCodeAt(0)]=i.Bracket.Open,v["]".charCodeAt(0)]=i.Bracket.Close;var b=o.createNumberDictionary();b["(".charCodeAt(0)]="delimiter.parenthesis.ts",b[")".charCodeAt(0)]="delimiter.parenthesis.ts",b["{".charCodeAt(0)]="delimiter.bracket.ts",b["}".charCodeAt(0)]="delimiter.bracket.ts",b["[".charCodeAt(0)]="delimiter.array.ts",b["]".charCodeAt(0)]="delimiter.array.ts";var y=o.createNumberDictionary();y[c.TokenClass.Identifier]="identifier.ts",y[c.TokenClass.Keyword]="keyword.ts",y[c.TokenClass.Operator]="delimiter.ts",y[c.TokenClass.Punctuation]="delimiter.ts",y[c.TokenClass.NumberLiteral]="number.ts",y[c.TokenClass.RegExpLiteral]="regexp.ts",y[c.TokenClass.StringLiteral]="string.ts";var _=o.createNumberDictionary();_["(".charCodeAt(0)]="delimiter.parenthesis.js",_[")".charCodeAt(0)]="delimiter.parenthesis.js",_["{".charCodeAt(0)]="delimiter.bracket.js",_["}".charCodeAt(0)]="delimiter.bracket.js",_["[".charCodeAt(0)]="delimiter.array.js",_["]".charCodeAt(0)]="delimiter.array.js";var w=o.createNumberDictionary();w[c.TokenClass.Identifier]="identifier.js",w[c.TokenClass.Keyword]="keyword.js",w[c.TokenClass.Operator]="delimiter.js",w[c.TokenClass.Punctuation]="delimiter.js",w[c.TokenClass.NumberLiteral]="number.js",w[c.TokenClass.RegExpLiteral]="regexp.js",w[c.TokenClass.StringLiteral]="string.js";var T=/^\s*\/\/\//}),define("vs/languages/typescript/features/quickFixMainActions",["require","exports","vs/base/strings","vs/base/errors","vs/base/lib/winjs.base","vs/base/paths"],function(e,t,n,r,o,i){var s=function(){function e(e){this._requestService=e.requestService,this._fileService=e.fileService,this._resourceService=e.resourceService}return e.prototype.evaluate=function(e,t,n){var r=JSON.parse(n);switch(r.type){case"addtripleslash":return this.evaluateTripleSlashQuickFix(r.name,e)}return o.Promise.as(null)},e.prototype.evaluateTripleSlashQuickFix=function(e,t){var o=this,s="/typings/"+e,a=n.rtrim(i.dirname(this._requestService.getPath("root",t)),"/"),l=i.relative(a,s),c=n.format('/// <reference path="{0}"/>\n',l),u={editOperations:[{range:{startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1},text:c}]};return this._fileService.resolveFileStat(s).then(function(){return u},function(){var t="https://raw.githubusercontent.com/borisyankov/DefinitelyTyped/master/"+e;return o._requestService.makeRequest({url:t,followRedirects:5}).then(function(e){return o._fileService.createFile(s,e.responseText).then(function(){return u},function(){return u})},function(e){return r.onUnexpectedError(n.format("Unable to fetch d.ts file at {0}: {1}",t,e.toString())),u})})},e}();t.QuickFixMainActions=s}),define("vs/languages/typescript/typescript",["require","exports","vs/platform/platform"],function(e,t,n){var r;!function(e){e.ResourceSetChanged="typescript.resourceSetChanged"}(r=t.Events||(t.Events={}));var o;!function(e){function t(e){o=e}function r(){return o}e.Identifier="typescript",n.Registry.add(e.Identifier,e);var o;e.setProjectResolver=t,e.getProjectResolver=r}(o=t.Extensions||(t.Extensions={}))});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/typescriptMode",["require","exports","vs/base/lib/winjs.base","vs/base/lifecycle","vs/base/errors","vs/editor/modes/modesExtensions","vs/editor/modes/supports","vs/base/uuid","vs/base/arrays","vs/platform/services","vs/languages/typescript/features/tokenization","vs/languages/typescript/features/quickFixMainActions","vs/platform/thread/attribute","vs/languages/typescript/typescript"],function(e,t,n,r,o,i,s,a,l,c,u,d,p,h){var m=function(e){function t(t,n){var r=this;e.call(this,t,n,c.AsyncDescriptor.create("vs/languages/typescript/typescriptWorker2","TypeScriptWorker2")),this._disposables=[],this._projectResolverPromise=null,this._projectPromise=null,this._pendingCallbacks=[],this._telemetryService=t.telemetryService,t.eventService&&this._disposables.push(t.eventService.addListener2(h.Events.ResourceSetChanged,function(){return r._joinProjectResolver()})),this.tokenizationSupport=u.createTokenizationSupport(this,u.Language.TypeScript),this.electricCharacterSupport=new s.BracketElectricCharacterSupport(this,{brackets:[{tokenType:"delimiter.bracket.ts",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.ts",open:"[",close:"]",isElectric:!0},{tokenType:"delimiter.parenthesis.ts",open:"(",close:")",isElectric:!0}],docComment:{scope:"comment.doc",open:"/**",lineStart:" * ",close:" */"}}),this.referenceSupport=new s.ReferenceSupport(this,{tokens:["identifier.ts"],findReferences:function(e,t,n){return r.findReferences(e,t,n)}}),this.navigateTypesSupport=this,this.extraInfoSupport=this,this.formattingSupport=this,this.declarationSupport=new s.DeclarationSupport(this,{tokens:["identifier.ts","string.ts","attribute.value.vs"],findDeclaration:function(e,t){return r.findDeclaration(e,t)}}),this.quickFixSupport=this,this.logicalSelectionSupport=this,this.parameterHintsSupport=new s.ParameterHintsSupport(this,{triggerCharacters:["(",","],excludeTokens:["string.ts"],getParameterHints:function(e,t){return r.getParameterHints(e,t)}}),this.outlineSupport=this,this.emitOutputSupport=this,this.codeLensSupport=this,this.renameSupport=this,this.characterPairSupport=new s.CharacterPairSupport(this,{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`"}]}),this.suggestSupport=new s.SuggestSupport(this,{triggerCharacters:["."],excludeTokens:["string","comment","number"],sortBy:[{type:"reference",partSeparator:"/"}],suggest:function(e,t){return r.suggest(e,t)},getSuggestionDetails:function(e,t,n){return r.getSuggestionDetails(e,t,n)}})}return __extends(t,e),t.prototype.dispose=function(){this._disposables=r.disposeAll(this._disposables)},t.prototype._releaseCallbacks=function(e,t){for(;this._pendingCallbacks.length>0;){var n=this._pendingCallbacks.shift();t?n.error(t):n.completion(e)}},t.prototype._joinProjectResolver=function(){var e=this;if(!this._threadService.isInMainThread)return null;var t,r;if(r=new n.TPromise(function(n,r){t={completion:n,error:r},e._pendingCallbacks.push(t)},function(){var n=e._pendingCallbacks.indexOf(t);n>=0&&(e._pendingCallbacks.splice(n,1),t.error(o.canceled()))}),!this._projectPromise){if(!this._projectResolverPromise){var i=this._getProjectResolverDescription();if(!i)return null;this._projectResolverPromise=this._instantiationService.createInstance(i)}this._projectPromise=this._projectResolverPromise.then(function(e){var t=e.resolve();return n.Promise.is(t)?t:n.TPromise.as({})}).then(function(t){return t?t.hasChanges!==!0&&l.isFalsyOrEmpty(t.added)&&l.isFalsyOrEmpty(t.removed)?null:e._acceptProjectDelta(t):null});var s,c=Date.now(),u=a.v4().asHex();s=setInterval(function(){e._telemetryService.log("typescript.projectResolver.slow",{module:e._getProjectResolverDescription().moduleName,ctor:e._getProjectResolverDescription().ctorName,resolveCallUuid:u,totalWaitTime:Date.now()-c})},2e4),this._projectPromise.done(function(t){clearTimeout(s),e._projectPromise=null,e._releaseCallbacks(t,null)},function(t){clearTimeout(s),e._projectPromise=null,e._releaseCallbacks(null,t)})}return r},t.prototype._getProjectResolverDescription=function(){return h.Extensions.getProjectResolver()},t.prototype._acceptProjectDelta=function(e){return this._worker(function(t){return t.acceptProjectDelta(e)})},t.prototype.getNonWordTokenTypes=function(){return["delimiter.ts","delimiter.parenthesis.ts","delimiter.bracket.ts","delimiter.array.ts"]},t.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},t.prototype._pickAWorkerToValidate=function(){return this._worker(function(e){return e.enableValidator()})},t.prototype.getOutline=function(e){return this._worker(function(t){return t.getOutline(e)})},t.prototype.findOccurrences=function(e,t,n){return void 0===n&&(n=!1),this._worker(function(r){return r.findOccurrences(e,t,n)})},t.prototype.suggest=function(e,t){return this._worker(function(n){return n.suggest(e,t)})},t.prototype.getSuggestionDetails=function(e,t,n){return this._worker(function(r){return r.getSuggestionDetails(e,t,n)})},t.prototype.getParameterHints=function(e,t){return this._worker(function(n){return n.getParameterHints(e,t)})},t.prototype.getEmitOutput=function(e,t){return void 0===t&&(t=void 0),this._worker(function(n){return n.getEmitOutput(e,t)})},t.prototype.getWordDefinition=function(){return t.WORD_DEFINITION},t.prototype._worker=function(t){return e.prototype._worker.call(this,t)},t.prototype.findReferences=function(e,t,n){return this._worker(function(r){return r.findReferences(e,t,n)})},Object.defineProperty(t.prototype,"filter",{get:function(){return["identifier.ts","string.ts"]},enumerable:!0,configurable:!0}),t.prototype.rename=function(e,t,n){return this._worker(function(r){return r.rename(e,t,n)})},t.prototype.getNavigateToItems=function(e){return this._worker(function(t){return t.getNavigateToItems(e)})},t.prototype.runQuickFixAction=function(e,t,n){var r=this,o=this._instantiationService.createInstance(d.QuickFixMainActions);return o.evaluate(e,t,n).then(function(o){return o?o:r.runQuickFixActionInWorker(e,t,n)})},t.prototype.runQuickFixActionInWorker=function(e,t,n){return this._worker(function(r){return r.runQuickFixAction(e,t,n)})},t.prototype.getQuickFixes=function(e,t){return this._worker(function(n){return n.getQuickFixes(e,t)})},t.prototype.getRangesToPosition=function(e,t){return this._worker(function(n){return n.getRangesToPosition(e,t)})},t.prototype.findDeclaration=function(e,t){return this._worker(function(n){return n.findDeclaration(e,t)})},t.prototype.findTypeDeclaration=function(e,t){return this._worker(function(n){return n.findTypeDeclaration(e,t)})},t.prototype.computeInfo=function(e,t){return this._worker(function(n){return n.computeInfo(e,t)})},t.prototype.getAutoFormatTriggerCharacters=function(){return[";","}","\n"]},t.prototype.formatDocument=function(e,t){return this._worker(function(n){return n.formatDocument(e,t)})},t.prototype.formatRange=function(e,t,n){return this._worker(function(r){return r.formatRange(e,t,n)})},t.prototype.formatAfterKeystroke=function(e,t,n,r){return this._worker(function(o){return o.formatAfterKeystroke(e,t,n,r)})},t.prototype.enableCodeLens=function(){return this._options&&this._options.referenceInfos===!0},t.prototype.findCodeLensSymbols=function(e){return this._worker(function(t){return t.findCodeLensSymbols(e)})},t.prototype.findCodeLensReferences=function(e,t){return this._worker(function(n){return n.findCodeLensReferences(e,t)})},t.$_acceptProjectDelta=p.AllWorkers(t,t.prototype._acceptProjectDelta),t.$_pickAWorkerToValidate=p.OneWorker(t,t.prototype._pickAWorkerToValidate,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.$getOutline=p.OneWorker(t,t.prototype.getOutline,c.ThreadAffinity.Group1),t.$findOccurrences=p.OneWorker(t,t.prototype.findOccurrences,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$suggest=p.OneWorker(t,t.prototype.suggest,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getSuggestionDetails=p.OneWorker(t,t.prototype.getSuggestionDetails,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getParameterHints=p.OneWorker(t,t.prototype.getParameterHints,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getEmitOutput=p.OneWorker(t,t.prototype.getEmitOutput,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.WORD_DEFINITION=i.createWordRegExp("$"),t.$findReferences=p.OneWorker(t,t.prototype.findReferences,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.$rename=p.OneWorker(t,t.prototype.rename,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getNavigateToItems=p.OneWorker(t,t.prototype.getNavigateToItems,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.$runQuickFixActionInWorker=p.OneWorker(t,t.prototype.runQuickFixActionInWorker,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getQuickFixes=p.OneWorker(t,t.prototype.getQuickFixes,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getRangesToPosition=p.OneWorker(t,t.prototype.getRangesToPosition,c.ThreadAffinity.Group1),t.$findDeclaration=p.OneWorker(t,t.prototype.findDeclaration,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$findTypeDeclaration=p.OneWorker(t,t.prototype.findTypeDeclaration,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$computeInfo=p.OneWorker(t,t.prototype.computeInfo,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$formatDocument=p.OneWorker(t,t.prototype.formatDocument,c.ThreadAffinity.Group1),t.$formatRange=p.OneWorker(t,t.prototype.formatRange,c.ThreadAffinity.Group1),t.$formatAfterKeystroke=p.OneWorker(t,t.prototype.formatAfterKeystroke,c.ThreadAffinity.Group1),t.findCodeLensSymbols=p.OneWorker(t,t.prototype.findCodeLensSymbols,c.ThreadAffinity.Group1),t.findCodeLensReferences=p.OneWorker(t,t.prototype.findCodeLensReferences,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t}(i.AbstractMode);t.TypeScriptMode=m});