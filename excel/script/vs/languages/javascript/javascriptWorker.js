/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/languages/javascript/javascript.configuration",["require","exports","vs/base/severity","vs/base/collections"],function(e,t,r,n){var o=function(){function e(e){this._lintSettings=e,this._severities={},this._severities[2322]=this._severities[2323]=this._severities[2345]=r.fromValue(e.forcedTypeConversion),this._severities[2362]=this._severities[2363]=this._severities[2365]=this._severities[2356]=this._severities[2357]=r.fromValue(e.mixedTypesArithmetics),this._severities[2359]=this._severities[2358]=r.fromValue(e.primitivesInInstanceOf),this._severities[2339]=r.fromValue(e.unknownProperty),this._severities[2304]=r.fromValue(e.undeclaredVariables),this._severities[2403]=r.fromValue(e.redeclaredVariables),this._severities[2350]=r.fromValue(e.newOnReturningFunctions)}return e.prototype.classify=function(e){var t=e.code;return 2e3>t?r.Error:2339===t&&n.lookup(this._severities,t)!==r.Ignore&&/The property '[\w\d_]+' does not exist on value of type '(any|{})'\./.test(e.messageText)?r.Ignore:n.lookup(this._severities,t,r.Ignore)},e}();t.JavaScriptDiagnosticsClassifier=o,t.defaultLintSettings={curlyBracketsMustNotBeOmitted:"ignore",emptyBlocksWithoutComment:"ignore",comparisonOperatorsNotStrict:"ignore",missingSemicolon:"ignore",reservedKeywords:"warning",typeScriptSpecifics:"warning",unknownTypeOfResults:"warning",semicolonsInsteadOfBlocks:"ignore",functionsInsideLoops:"ignore",tripleSlashReferenceAlike:"warning",unusedVariables:"warning",unusedFunctions:"ignore",newOnLowercaseFunctions:"warning",newOnReturningFunctions:"warning",redeclaredVariables:"warning",undeclaredVariables:"warning",unknownProperty:"ignore",primitivesInInstanceOf:"error",mixedTypesArithmetics:"warning",forcedTypeConversion:"warning"},t._internalDefaultValidationSettings={scope:"/",baseUrl:"",noImplicitAny:!1,noLib:!1,extraLibs:["vs/text!vs/languages/typescript/lib/lib.d.ts"],semanticValidation:!0,syntaxValidation:!0,target:"ES5",module:"",lint:t.defaultLintSettings},t.defaultValidationSettings={target:"ES5",module:"",baseUrl:"",lint:t.defaultLintSettings},t.defaultSuggestSettions={alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/js/textEdits",["require","exports","vs/base/arrays","vs/base/strings","vs/base/collections"],function(e,t,r,n,o){function i(e,t){return-s(e,t)}function s(e,t){return e.offset===t.offset?t.length-e.length:t.offset-e.offset}function a(e){var t={};r.forEach(e,function(e,r){if(e.isInsert()){var n=o.lookupOrInsert(t,e.offset,e);n!==e&&(n.text+=e.text,r())}})}function l(e,t){var r,o=[],i=t.length,l=[],c=[];a(e),e.sort(s);for(var u=0,h=e.length;h>u;u++)r=e[u],o.push(t.substring(r.end,i)),o.push(r.text),i=r.offset,l.push(r.deltaLength),c.push(new d(r.offset,r.text.length,t.substr(r.offset,r.length)));o.push(t.substring(0,i));for(var p=0,u=c.length-1;u>=0;u--)c[u].offset+=p,p+=l[u];return{value:o.reverse().join(n.empty),doEdits:e,undoEdits:c}}function c(e,t,r){"undefined"==typeof r&&(r=h.None),e.sort(i);for(var n,o=0,s=0,a=e.length;a>s;s++)if(n=e[s],n.end<t)o+=n.deltaLength;else{if(n.offset>t)break;n.offset<=t&&n.end>=t&&(r===h.None?o+=Math.min(0,n.offset+(n.length+n.deltaLength)-t):r===h.StickLeft?o+=n.offset-t:r===h.StickRight&&(o+=n.end+n.deltaLength-t))}return t+o}var u=function(){function e(e,t){this.offset=e,this.length=t}return e.from=function(t){return new e(t.offset,t.length)},Object.defineProperty(e.prototype,"end",{get:function(){return this.offset+this.length},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.offset===e.offset&&this.length===e.length},e.prototype.before=function(e){return this.end<=e.offset},e.prototype.after=function(t){return new e(t.offset,t.length).before(this)},e.prototype.contains=function(e){return e.offset>=this.offset&&e.offset<this.end&&e.offset+e.length<=this.end},e.prototype.overlaps=function(t){var r=new e(t.offset,t.length);return this.offset<r.offset&&this.end>=r.offset&&this.end<=r.end||r.offset<this.offset&&r.end>=this.offset&&r.end<=this.end},e}();t.TextSpan=u;var d=function(e){function t(t,r,n){e.call(this,t,r),this.text=n}return __extends(t,e),Object.defineProperty(t.prototype,"deltaLength",{get:function(){return this.text.length-this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaEnd",{get:function(){return this.end+this.deltaLength},enumerable:!0,configurable:!0}),t.prototype.isInsert=function(){return 0===this.length&&this.text.length>0},t.prototype.isReplace=function(){return this.length>0&&this.text.length>0},t.prototype.isDelete=function(){return this.length>0&&0===this.text.length},t.prototype.equals=function(t){return this.text===t.text&&e.prototype.equals.call(this,t)},t.prototype.toString=function(){return n.format("{0}-{1}/{2}",this.offset,this.length,this.text)},t}(u);t.Edit=d,t.compareAscending=i,t.compareDecending=s,t.apply=l,function(e){e[e.None=0]="None",e[e.StickLeft=1]="StickLeft",e[e.StickRight=2]="StickRight"}(t.TranslationBehaviour||(t.TranslationBehaviour={}));var h=t.TranslationBehaviour;t.translate=c}),define("vs/languages/typescript/js/javaScriptRewriter",["require","exports","vs/base/strings","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/js/textEdits"],function(e,t,r,n,o){function i(e,t,r){t||(t=n.createSourceFile("fakefilename.ts",r,n.ScriptTarget.ES5,"",!1),n.bindSourceFile(t));for(var i=new l(t),s=0,a=e.length;a>s;s++)e[s].computeEdits(i);return 0===i.edits.length?{value:r,doEdits:[],undoEdits:[]}:o.apply(i.edits,r)}function s(e){return"function"==typeof e.computeEdits&&1===e.computeEdits.length}var a=function(){function e(){}return e.prototype.to=function(e){return e},e.prototype.from=function(e){return e},Object.defineProperty(e.prototype,"report",{get:function(){return{isInserted:function(){return!1}}},enumerable:!0,configurable:!0}),e.Instance=new e,e}();t.IdentityTranslator=a,t.translate=i;var l=function(){function e(e){this.sourceFile=e,this.sourceUnitStart=e.getStart(),this.edits=[]}return e.prototype.newInsert=function(e,t){var r;"string"==typeof e?(r=this.sourceUnitStart,t=e):r=e,this.edits.push(new o.Edit(r,0,t))},e.prototype.newDelete=function(e,t){this.edits.push(new o.Edit(e,t,r.empty))},e.prototype.newReplace=function(e,t,r){this.edits.push(new o.Edit(e,t,r))},e.prototype.newAppend=function(e){this.edits.push(new o.Edit(this.sourceFile.getFullWidth(),0,e))},e}();t.AnalyzerContext=l,t.isISyntaxRewriter=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/javascript/project/languageServiceHosts",["require","exports","vs/editor/core/position","vs/base/paths","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/js/javaScriptRewriter","vs/languages/typescript/js/textEdits"],function(e,t,r,n,o,i,s){var a=function(){function e(e){this._delegate=e}return e.prototype.dispose=function(){this._delegate.dispose()},e.prototype.getStateId=function(){return this._delegate.getStateId()},e.prototype.addScriptSnapshot=function(e,t){return this._delegate.addScriptSnapshot(e,t)},e.prototype.removeScriptSnapshot=function(e){return this._delegate.removeScriptSnapshot(e)},e.prototype.getCompilationSettings=function(){return this._delegate.getCompilationSettings()},e.prototype.getScriptFileNames=function(){return this._delegate.getScriptFileNames()},e.prototype.getScriptVersion=function(e){return this._delegate.getScriptVersion(e)},e.prototype.getScriptIsOpen=function(e){return this._delegate.getScriptIsOpen(e)},e.prototype.getScriptSnapshot=function(e){return this._delegate.getScriptSnapshot(e)},e.prototype.getLocalizedDiagnosticMessages=function(){return this._delegate.getLocalizedDiagnosticMessages()},e.prototype.getCancellationToken=function(){return this._delegate.getCancellationToken()},e.prototype.getCurrentDirectory=function(){return this._delegate.getCurrentDirectory()},e.prototype.getDefaultLibFilename=function(e){return this._delegate.getDefaultLibFilename(e)},e.prototype.log=function(e){this._delegate.log(e)},e}();t.DelegateLanguageServiceHost=a;var l=function(){function e(e){this._lineStarts=e.getLineStartPositions()}return e.prototype.getPosition=function(e,t){return o.getPositionFromLineAndCharacter(this._lineStarts,e,t)},e.prototype.getLineAndCharacterFromPosition=function(e){return o.getLineAndCharacterOfPosition(this._lineStarts,e)},e}(),c=function(){function e(e,t,r){this._textOperationResult=e,this._lineMapModified=new l(t),this._lineMapOriginal=new l(r)}return e.prototype.to=function(e){if(r.isIPosition(e))return this._doTranslate(this._textOperationResult.doEdits,this._lineMapOriginal,this._lineMapModified,e,s.TranslationBehaviour.None);var t=e,n=this._doTranslate(this._textOperationResult.doEdits,this._lineMapOriginal,this._lineMapModified,{lineNumber:t.startLineNumber,column:t.startColumn},s.TranslationBehaviour.None),o=this._doTranslate(this._textOperationResult.doEdits,this._lineMapOriginal,this._lineMapModified,{lineNumber:t.endLineNumber,column:t.endColumn},s.TranslationBehaviour.None);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:o.lineNumber,endColumn:o.column}},e.prototype.from=function(e){if(r.isIPosition(e))return this._doTranslate(this._textOperationResult.undoEdits,this._lineMapModified,this._lineMapOriginal,e,s.TranslationBehaviour.None);var t=e,n=this._doTranslate(this._textOperationResult.undoEdits,this._lineMapModified,this._lineMapOriginal,{lineNumber:t.startLineNumber,column:t.startColumn},s.TranslationBehaviour.StickLeft),o=this._doTranslate(this._textOperationResult.undoEdits,this._lineMapModified,this._lineMapOriginal,{lineNumber:t.endLineNumber,column:t.endColumn},s.TranslationBehaviour.StickRight);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:o.lineNumber,endColumn:o.column}},e.prototype._doTranslate=function(e,t,r,n,o){var i=t.getPosition(n.lineNumber,n.column),a=s.translate(e,i,o),l=r.getLineAndCharacterFromPosition(a);return{lineNumber:l.line,column:l.character}},Object.defineProperty(e.prototype,"report",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.isInserted=function(e){var t;t=r.isIPosition(e)?r.PositionUtils.asEmptyRange(e):e;for(var n=this._lineMapModified.getPosition(t.startLineNumber,t.startColumn),o=this._lineMapModified.getPosition(t.endLineNumber,t.endColumn),i=this._textOperationResult.undoEdits,a=0,l=i.length;l>a;a++)if(i[a].contains(new s.TextSpan(n,o-n)))return!0;return!1},e}(),u=function(){function e(e){this._value=e,this._lineStarts=o.computeLineStarts(e)}return e.prototype.getText=function(e,t){return this._value.substring(e,t)},e.prototype.getLength=function(){return this._value.length},e.prototype.getLineStartPositions=function(){return this._lineStarts},e.prototype.getChangeRange=function(){return null},e}(),d=function(e){function t(t,r){e.call(this,t),this._rewriter=r,this._rewrittenSnapshots=Object.create(null)}return __extends(t,e),t.prototype.dispose=function(){},t.prototype.getScriptSnapshot=function(t){var r=this._getOrCreateRewrittenSnapshot(t);return r?r.snapshot:e.prototype.getScriptSnapshot.call(this,t)},t.prototype.getTranslator=function(e){var t=this._getOrCreateRewrittenSnapshot(e);return t?t.translator:null},t.prototype._getOrCreateRewrittenSnapshot=function(t){if(".ts"===n.extname(t))return null;if(!e.prototype.getScriptSnapshot.call(this,t))return null;var r=this.getScriptVersion(t),o=this._rewrittenSnapshots[t];if(!o||o.versionId!==r){var s=e.prototype.getScriptSnapshot.call(this,t),a=i.translate(this._rewriter,null,s.getText(0,s.getLength())),l=new u(a.value);o={versionId:this.getScriptVersion(t),snapshot:l,translator:new c(a,l,s)},this._rewrittenSnapshots[t]=o}return o},t}(a);t.RewritingLanguageServiceHost=d}),define("vs/languages/typescript/js/shebangRewriter",["require","exports"],function(){var e=function(){function e(){}return e.prototype.computeEdits=function(t){var r=t.sourceFile.getFullText();if(r.charCodeAt(0)===e._hash&&r.charCodeAt(1)===e._bang){var n=~r.indexOf("\n")||~r.indexOf("\r");n=n?~n:r.length,t.newDelete(0,n)}},e._hash="#".charCodeAt(0),e._bang="!".charCodeAt(0),e}();return e});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/javascript/project/javascriptProject",["require","exports","vs/languages/typescript/lib/typescriptServices","vs/languages/javascript/project/languageServiceHosts","vs/languages/typescript/project/typescriptProject","vs/languages/typescript/js/javaScriptRewriter","vs/languages/typescript/js/shebangRewriter"],function(e,t,r,n,o,i,s){var a=function(e){function t(t,r,n,o,i,a,l,c){e.call(this,t,n,o,i,a,l,c),this._rewriter=r,this._rewriter.push(new s)}return __extends(t,e),t.prototype.syntaxLanguageService=function(){if(!this._syntaxLanguageService){var t=e.prototype.syntaxLanguageService.call(this),o=new n.RewritingLanguageServiceHost(t.host,[new s]);this._disposables.push(o),this._applyCompileConfig(o.getCompilationSettings());var i=r.createLanguageService(o,r.createDocumentRegistry());i.host=o,this._disposables.push(o),this._syntaxLanguageService=i}return this._syntaxLanguageService},t.prototype.semanticLanguageService=function(){if(!this._semanticLanguageService){var t=e.prototype.semanticLanguageService.call(this),o=new n.RewritingLanguageServiceHost(t.host,this._rewriter);this._disposables.push(o),this._applyCompileConfig(o.getCompilationSettings());var i=r.createLanguageService(o,r.createDocumentRegistry());i.host=o,this._semanticLanguageService=i}return this._semanticLanguageService},t.prototype.getTranslater=function(e){var t=this.semanticLanguageService().host;return t.getTranslator(e.toString())||i.IdentityTranslator.Instance},t}(o.TypeScriptProject);t.JavascriptProject=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/javascript/javascriptWorker",["require","exports","vs/base/strings","vs/base/objects","vs/base/arrays","vs/editor/modes/modesFilters","vs/editor/core/model/mirrorModel","vs/languages/typescript/typescriptWorker2","vs/languages/typescript/typescript.configuration","vs/languages/javascript/javascript.configuration","vs/languages/typescript/js/javaScriptRewriter","vs/languages/javascript/project/javascriptProject","vs/languages/typescript/features/validationStrategy"],function(e,t,r,n,o,i,s,a,l,c,u,d,h){var p=function(e){function t(t,r,n){e.call(this,t,r,n)}return __extends(t,e),t.prototype._doConfigure=function(t){for(var r=l.sanitize(t,c._internalDefaultValidationSettings,c.defaultSuggestSettions),n=0,o=r.validate.length;o>n;n++){var i=new c.JavaScriptDiagnosticsClassifier(r.validate[n].lint);r.validate[n].diagnosticClassifier=i.classify.bind(i)}return e.prototype._doConfigure.call(this,r)},t.prototype._isMirrorModelAndMyMode=function(t){var n=e.prototype._isMirrorModelAndMyMode.call(this,t);if(n)return!0;if(!(t instanceof s.AbstractMirrorModel))return!1;var o=t,i=o.getModeId();if("typescript"!==i)return!1;var a=o.getAssociatedResource().getPath();return r.endsWith(a,"_references.ts")||r.endsWith(a,".d.ts")?!0:!1},t.prototype._createProject=function(e,t,r,n,o){return this._instantiationService.createInstance(d.JavascriptProject,this._getWorkerParticipants(function(e){return u.isISyntaxRewriter(e)}),this._getMode(),e,r,t,n,o)},t.prototype.translator=function(e){var t=this.findProject(e);return t.getTranslater(e)},t.prototype._isRelevantForValidationPurposes=function(e){return r.endsWith(e.toString(),".d.ts")||r.endsWith(e.toString(),"_references.ts")},t.prototype._shouldValidate=function(e){return!this._isRelevantForValidationPurposes(e)},t.prototype.doValidateOnChange=function(t,r,n){var o=this._shouldValidate.bind(this);e.prototype.doValidateOnChange.call(this,t.filter(o),r.filter(o),n)},t.prototype._shouldIncludeModelInValidation=function(t){if(!(t instanceof s.MirrorModel||t instanceof s.MirrorModelEmbedded))return!1;if(e.prototype._shouldIncludeModelInValidation.call(this,t))return!0;var r=t;return this._isRelevantForValidationPurposes(r.getAssociatedResource())},t.prototype._publishMarkersForResource=function(t,r,n){if(r!==h.ValidationType.Syntax){var i=this.translator(t);o.forEach(n,function(e,t){var r={startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn};i.report.isInserted(r)?t():(r=i.from(r),e.startLineNumber=r.startLineNumber,e.startColumn=r.startColumn,e.endLineNumber=r.endLineNumber,e.endColumn=r.endColumn)})}return e.prototype._publishMarkersForResource.call(this,t,r,n)},t.prototype.doSuggest=function(t,r){return e.prototype.doSuggest.call(this,t,this.translator(t).to(r))},t.prototype.getSuggestionFilter=function(){return i.and(function(e,t){return t.label.indexOf("̲")<0},e.prototype.getSuggestionFilter.call(this))},t.prototype.getSuggestionDetails=function(t,r,n){return e.prototype.getSuggestionDetails.call(this,t,this.translator(t).to(r),n)},t.prototype.getParameterHints=function(t,r){return e.prototype.getParameterHints.call(this,t,this.translator(t).to(r))},t.prototype.findOccurrences=function(t,r,n){var i=this;return e.prototype.findOccurrences.call(this,t,this.translator(t).to(r),n).then(function(e){return o.forEach(e,function(e,r){i.translator(t).report.isInserted(e.range)?r():e.range=i.translator(t).from(e.range)}),e})},t.prototype._findTypeScriptDeclaration=function(t,r){var n=this;return e.prototype._findTypeScriptDeclaration.call(this,t,this.translator(t).to(r)).then(function(e){if(e){var t=n.translator(e.resourceUrl);if(!t.report.isInserted(e.range))return e.range=t.from(e.range),e}return null})},t.prototype.findReferences=function(t,r,n){var i=this;return e.prototype.findReferences.call(this,t,this.translator(t).to(r),n).then(function(e){return o.forEach(e,function(e,t){var r=i.translator(e.resourceUrl);r.report.isInserted(e.range)?t():e.range=r.from(e.range)}),e})},t.prototype.computeInfo=function(t,r){var n=this;return e.prototype.computeInfo.call(this,t,this.translator(t).to(r)).then(function(e){return e&&(e.range=n.translator(t).from(e.range)),e})},t.prototype.runQuickFixAction=function(t,r,n){var o=this.translator(t);return e.prototype.runQuickFixAction.call(this,t,o.to(r),n).then(function(e){return e&&e.editOperations.forEach(function(e){return e.range=o.from(e.range)}),e})},t.prototype.getQuickFixes=function(t,r){var o=this.translator(t).to(r);return n.mixin(o,r,!1),e.prototype.getQuickFixes.call(this,t,o)},t}(a.TypeScriptWorker2);t.JavaScriptWorker=p});