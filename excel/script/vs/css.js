"use strict";var __extends=this.__extends||function(e,r){function t(){this.constructor=e}for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);t.prototype=r.prototype,e.prototype=new t},_cssPluginGlobal=this,CSSLoaderPlugin;!function(e){var r=_cssPluginGlobal,t=function(){function e(){this._pendingLoads=0}return e.prototype.attachListeners=function(e,r,t,n){var o=function(){r.removeEventListener("load",i),r.removeEventListener("error",s)},i=function(){o(),t()},s=function(e){o(),n(e)};r.addEventListener("load",i),r.addEventListener("error",s)},e.prototype._onLoad=function(e,r){this._pendingLoads--,r()},e.prototype._onLoadError=function(e,r,t){this._pendingLoads--,r(t)},e.prototype._insertLinkNode=function(e){this._pendingLoads++;var r=document.head||document.getElementsByTagName("head")[0],t=r.getElementsByTagName("link")||document.head.getElementsByTagName("script");t.length>0?r.insertBefore(e,t[t.length-1]):r.appendChild(e)},e.prototype.createLinkTag=function(e,r,t,n){var o=this,i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("data-name",e);var s=function(){return o._onLoad(e,t)},a=function(r){return o._onLoadError(e,n,r)};return this.attachListeners(e,i,s,a),i.setAttribute("href",r),i},e.prototype._linkTagExists=function(e,r){var t,n,o,i,s=document.getElementsByTagName("link");for(t=0,n=s.length;n>t;t++)if(o=s[t].getAttribute("data-name"),i=s[t].getAttribute("href"),o===e||i===r)return!0;return!1},e.prototype.load=function(e,r,t,n){if(this._linkTagExists(e,r))return t(),void 0;var o=this.createLinkTag(e,r,t,n);this._insertLinkNode(o)},e}(),n=function(e){function r(){e.call(this),this._blockedLoads=[],this._mergeStyleSheetsTimeout=-1}return __extends(r,e),r.prototype.load=function(e,r,t,n){if(this._linkTagExists(e,r))return t(),void 0;var o=this.createLinkTag(e,r,t,n);this._styleSheetCount()<31?this._insertLinkNode(o):(this._blockedLoads.push(o),this._handleBlocked())},r.prototype._styleSheetCount=function(){var e=document.getElementsByTagName("link").length,r=document.getElementsByTagName("style").length;return e+r},r.prototype._onLoad=function(r,t){e.prototype._onLoad.call(this,r,t),this._handleBlocked()},r.prototype._onLoadError=function(r,t,n){e.prototype._onLoadError.call(this,r,t,n),this._handleBlocked()},r.prototype._handleBlocked=function(){var e=this,r=this._blockedLoads.length;r>0&&-1===this._mergeStyleSheetsTimeout&&(this._mergeStyleSheetsTimeout=window.setTimeout(function(){return e._mergeStyleSheets()},0))},r.prototype._mergeStyleSheet=function(e,r,t,n){for(var o=n.rules.length-1;o>=0;o--)r.insertRule(a.rewriteUrls(t,e,n.rules[o].cssText),0)},r.prototype._mergeStyleSheets=function(){this._mergeStyleSheetsTimeout=-1;var e,r=this._blockedLoads.length,t=document.getElementsByTagName("link"),n=t.length,o=[];for(e=0;n>e;e++)("loaded"===t[e].readyState||"complete"===t[e].readyState)&&o.push({linkNode:t[e],rulesLength:t[e].styleSheet.rules.length});var i=o.length,s=Math.min(Math.floor(i/2),r);o.sort(function(e,r){return r.rulesLength-e.rulesLength});var a,u;for(e=0;s>e;e++)a=o.length-1-e,u=e%(o.length-s),this._mergeStyleSheet(o[u].linkNode.href,o[u].linkNode.styleSheet,o[a].linkNode.href,o[a].linkNode.styleSheet),o[a].linkNode.parentNode.removeChild(o[a].linkNode),n--;for(var l=this._styleSheetCount();31>l&&this._blockedLoads.length>0;)this._insertLinkNode(this._blockedLoads.shift()),l++},r}(t),o=function(e){function r(){e.call(this)}return __extends(r,e),r.prototype.attachListeners=function(e,r,t){r.onload=function(){r.onload=null,t()}},r}(n),i=function(){function e(){this.fs=require.nodeRequire("fs")}return e.prototype.load=function(r,t,n){var o=this.fs.readFileSync(t,"utf8");o.charCodeAt(0)===e.BOM_CHAR_CODE&&(o=o.substring(1)),n(o)},e.BOM_CHAR_CODE=65279,e}(),s=function(){function e(e){this.cssLoader=e}return e.prototype.load=function(r,t,n,o){o=o||{};var i=t.toUrl(r+".css");this.cssLoader.load(r,i,function(t){o.isBuild&&(e.BUILD_MAP[r]=t),n({})},function(){"function"==typeof n.error&&n.error("Could not find "+i+" or it was empty")})},e.prototype.write=function(t,n,o){var i=o.getEntryPoint();r.entryPoints=r.entryPoints||{},r.entryPoints[i]=r.entryPoints[i]||[],r.entryPoints[i].push({moduleName:n,contents:e.BUILD_MAP[n]}),o.asModule(t+"!"+n,"define(['vs/css!"+i+"'], {});")},e.prototype.writeFile=function(e,t,n,o){if(r.entryPoints&&r.entryPoints.hasOwnProperty(t)){for(var i=n.toUrl(t+".css"),s=["/*---------------------------------------------------------"," * Copyright (C) Microsoft Corporation. All rights reserved."," *--------------------------------------------------------*/"],u=r.entryPoints[t],l=0;l<u.length;l++)s.push(a.rewriteUrls(u[l].moduleName,t,u[l].contents));o(i,s.join("\r\n"))}},e.BUILD_MAP={},e}();e.CSSPlugin=s;var a=function(){function e(){}return e.startsWith=function(e,r){return e.length>=r.length&&e.substr(0,r.length)===r},e.pathOf=function(e){var r=e.lastIndexOf("/");return-1!==r?e.substr(0,r+1):""},e.joinPaths=function(r,t){function n(r,t){return e.startsWith(r,t)?Math.max(t.length,r.indexOf("/",t.length)):0}function o(e,r){if("./"!==r){if("../"===r){var t=e.length>0?e[e.length-1]:null;if(t&&"/"===t)return;if(t&&"../"!==t)return e.pop(),void 0}e.push(r)}}function i(e,r){for(;r.length>0;){var t=r.indexOf("/"),n=t>=0?r.substring(0,t+1):r;r=t>=0?r.substring(t+1):"",o(e,n)}}var s=0;s=s||n(r,"//"),s=s||n(r,"http://"),s=s||n(r,"https://");var a=[];return i(a,r.substr(s)),t.length>0&&"/"===t.charAt(0)&&(a=[]),i(a,t),r.substring(0,s)+a.join("")},e.commonPrefix=function(e,r){for(var t=Math.min(e.length,r.length),n=0;t>n&&e.charCodeAt(n)===r.charCodeAt(n);n++);return e.substring(0,n)},e.commonFolderPrefix=function(r,t){var n=e.commonPrefix(r,t),o=n.lastIndexOf("/");return-1===o?"":n.substring(0,o+1)},e.relativePath=function(r,t){if(e.startsWith(t,"/")||e.startsWith(t,"http://")||e.startsWith(t,"https://"))return t;var n=e.commonFolderPrefix(r,t);r=r.substr(n.length),t=t.substr(n.length);for(var o=r.split("/").length,i="",s=1;o>s;s++)i+="../";return i+t},e.rewriteUrls=function(r,t,n){return n.replace(/url\(\s*([^\)]+)\s*\)?/g,function(){for(var n=[],o=0;o<arguments.length-1;o++)n[o]=arguments[o+1];var i=n[0];for(('"'===i.charAt(0)||"'"===i.charAt(0))&&(i=i.substring(1));i.length>0&&(" "===i.charAt(i.length-1)||"	"===i.charAt(i.length-1));)i=i.substring(0,i.length-1);if(('"'===i.charAt(i.length-1)||"'"===i.charAt(i.length-1))&&(i=i.substring(0,i.length-1)),!e.startsWith(i,"data:")&&!e.startsWith(i,"http://")&&!e.startsWith(i,"https://")){var s=e.joinPaths(e.pathOf(r),i);i=e.relativePath(t,s)}return"url("+i+")"})},e}();e.Utilities=a,function(){var e=null;e="undefined"!=typeof process&&process.versions&&process.versions.node&&!process.__node_webkit&&!process.__atom_shell?new i:navigator.userAgent.indexOf("MSIE 9")>=0?new n:navigator.userAgent.indexOf("MSIE 8")>=0?new o:new t,define("vs/css",new s(e))}()}(CSSLoaderPlugin||(CSSLoaderPlugin={}));